const e="undefined"!=typeof PointerEvent;String(Math.random()).slice(2),document.createComment(""),document.createElement("template"),document.createTextNode("");let t=!1;(()=>{try{const e={get capture(){return t=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})(),"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.5");document.createElement("template");class i{constructor(){this.isAction=!0}}i.prototype.isAction=!0;document.createTextNode("");const n=e=>null!=e&&"boolean"==typeof e.isDirective,s="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,o=(e,t,i=null,n=null)=>{for(;t!==i;){const i=t.nextSibling;e.insertBefore(t,n),t=i}},r=(e,t,i=null)=>{for(;t!==i;){const i=t.nextSibling;e.removeChild(t),t=i}},c={},l={},a=`{{lit-${String(Math.random()).slice(2)}}}`,d=`\x3c!--${a}--\x3e`,m=new RegExp(`${a}|${d}`),h="$lit$";class u{constructor(e,t){this.parts=[],this.element=t;const i=[],n=[],s=document.createTreeWalker(t.content,133,null,!1);let o=0,r=-1,c=0;const{strings:l,values:{length:d}}=e;for(;c<d;){const e=s.nextNode();if(null!==e){if(r++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:i}=t;let n=0;for(let e=0;e<i;e++)g(t[e].name,h)&&n++;for(;n-- >0;){const t=l[c],i=w.exec(t)[2],n=i.toLowerCase()+h,s=e.getAttribute(n);e.removeAttribute(n);const o=s.split(m);this.parts.push({type:"attribute",index:r,name:i,strings:o,sanitizer:void 0}),c+=o.length-1}}"TEMPLATE"===e.tagName&&(n.push(e),s.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(a)>=0){const n=e.parentNode,s=t.split(m),o=s.length-1;for(let t=0;t<o;t++){let i,o=s[t];if(""===o)i=f();else{const e=w.exec(o);null!==e&&g(e[2],h)&&(o=o.slice(0,e.index)+e[1]+e[2].slice(0,-h.length)+e[3]),i=document.createTextNode(o)}n.insertBefore(i,e),this.parts.push({type:"node",index:++r})}""===s[o]?(n.insertBefore(f(),e),i.push(e)):e.data=s[o],c+=o}}else if(8===e.nodeType)if(e.data===a){const t=e.parentNode;null!==e.previousSibling&&r!==o||(r++,t.insertBefore(f(),e)),o=r,this.parts.push({type:"node",index:r}),null===e.nextSibling?e.data="":(i.push(e),r--),c++}else{let t=-1;for(;-1!==(t=e.data.indexOf(a,t+1));)this.parts.push({type:"node",index:-1}),c++}}else s.currentNode=n.pop()}for(const e of i)e.parentNode.removeChild(e)}}const g=(e,t)=>{const i=e.length-t.length;return i>=0&&e.slice(i)===t},p=e=>-1!==e.index,v=document.createComment(""),f=()=>v.cloneNode(),w=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class y{constructor(e,t,i){this.__parts=[],this.template=e,this.processor=t,this.options=i}update(e){let t=0;for(const i of this.__parts)void 0!==i&&i.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=s?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],i=this.template.parts,n=document.createTreeWalker(e,133,null,!1);let o,r=0,c=0,l=n.nextNode();for(;r<i.length;)if(o=i[r],p(o)){for(;c<o.index;)c++,"TEMPLATE"===l.nodeName&&(t.push(l),n.currentNode=l.content),null===(l=n.nextNode())&&(n.currentNode=t.pop(),l=n.nextNode());if("node"===o.type){const e=this.processor.handleTextExpression(this.options,o);e.insertAfterNode(l.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options,o));r++}else this.__parts.push(void 0),r++;return s&&(document.adoptNode(e),customElements.upgrade(e)),e}}let b;const _=` ${a} `,E=document.createElement("template");class x{constructor(e,t,i,n){this.strings=e,this.values=t,this.type=i,this.processor=n}getHTML(){const e=this.strings.length-1;let t="",i=!1;for(let n=0;n<e;n++){const e=this.strings[n],s=e.lastIndexOf("\x3c!--");i=(s>-1||i)&&-1===e.indexOf("--\x3e",s+1);const o=w.exec(e);t+=null===o?e+(i?_:d):e.substr(0,o.index)+o[1]+o[2]+h+o[3]+a}return t+=this.strings[e],t}getTemplateElement(){const e=E.cloneNode();return e.innerHTML=function(e){const t=window,i=t.trustedTypes||t.TrustedTypes;return i&&!b&&(b=i.createPolicy("lit-html",{createHTML:e=>e})),b?b.createHTML(e):e}(this.getHTML()),e}}class L extends x{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const e=super.getTemplateElement(),t=e.content,i=t.firstChild;return t.removeChild(i),o(t,i.firstChild),e}}const N=e=>null===e||!("object"==typeof e||"function"==typeof e),P=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]),S=e=>e,T=(e,t,i)=>S;let C=T;const z=document.createTextNode("");class k{constructor(e,t,i,n,s="attribute"){this.dirty=!0,this.element=e,this.name=t,this.strings=i,this.parts=[];let o=n&&n.sanitizer;void 0===o&&(o=C(e,t,s),void 0!==n&&(n.sanitizer=o)),this.sanitizer=o;for(let e=0;e<i.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new M(this)}_getValue(){const e=this.strings,t=this.parts,i=e.length-1;if(1===i&&""===e[0]&&""===e[1]&&void 0!==t[0]){const e=t[0].value;if(!P(e))return e}let n="";for(let s=0;s<i;s++){n+=e[s];const i=t[s];if(void 0!==i){const e=i.value;if(N(e)||!P(e))n+="string"==typeof e?e:String(e);else for(const t of e)n+="string"==typeof t?t:String(t)}}return n+=e[i],n}commit(){if(this.dirty){this.dirty=!1;let e=this._getValue();e=this.sanitizer(e),"symbol"==typeof e&&(e=String(e)),this.element.setAttribute(this.name,e)}}}class M{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===c||N(e)&&e===this.value||(this.value=e,n(e)||(this.committer.dirty=!0))}commit(){for(;n(this.value);){const e=this.value;this.value=c,e.isClass?e.body(this):e(this)}this.value!==c&&this.committer.commit()}}class V{constructor(e,t){this.value=void 0,this.__pendingValue=void 0,this.textSanitizer=void 0,this.options=e,this.templatePart=t}appendInto(e){this.startNode=e.appendChild(f()),this.endNode=e.appendChild(f())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=f()),e.__insert(this.endNode=f())}insertAfterPart(e){e.__insert(this.startNode=f()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){for(;n(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=c,e.isClass?e.body(this):e(this)}const e=this.__pendingValue;e!==c&&(N(e)?e!==this.value&&this.__commitText(e):e instanceof x?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):P(e)?this.__commitIterable(e):e===l?(this.value=l,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling;if(e=null==e?"":e,t===this.endNode.previousSibling&&3===t.nodeType){void 0===this.textSanitizer&&(this.textSanitizer=C(t,"data","property"));const i=this.textSanitizer(e);t.data="string"==typeof i?i:String(i)}else{const t=z.cloneNode();this.__commitNode(t),void 0===this.textSanitizer&&(this.textSanitizer=C(t,"data","property"));const i=this.textSanitizer(e);t.data="string"==typeof i?i:String(i)}this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof y&&this.value.template===t)this.value.update(e.values);else{const i=this.endNode.parentNode;if(C!==T&&"STYLE"===i.nodeName||"SCRIPT"===i.nodeName)return void this.__commitText("/* lit-html will not write TemplateResults to scripts and styles */");const n=new y(t,e.processor,this.options),s=n._clone();n.update(e.values),this.__commitNode(s),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let i,n=0;for(const s of e)i=t[n],void 0===i&&(i=new V(this.options,this.templatePart),t.push(i),0===n?i.appendIntoPart(this):i.insertAfterPart(t[n-1])),i.setValue(s),i.commit(),n++;n<t.length&&(t.length=n,this.clear(i&&i.endNode))}clear(e=this.startNode){r(this.startNode.parentNode,e.nextSibling,this.endNode)}}class A{constructor(e,t,i){if(this.value=void 0,this.__pendingValue=void 0,2!==i.length||""!==i[0]||""!==i[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=i}setValue(e){this.__pendingValue=e}commit(){for(;n(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=c,e.isClass?e.body(this):e(this)}if(this.__pendingValue===c)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=c}}class D extends k{constructor(e,t,i,n){super(e,t,i,n,"property"),this.single=2===i.length&&""===i[0]&&""===i[1]}_createPart(){return new X(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){if(this.dirty){this.dirty=!1;let e=this._getValue();e=this.sanitizer(e),this.element[this.name]=e}}}class X extends M{}let O=!1;(()=>{try{const e={get capture(){return O=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class Y{constructor(e,t,i){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=i,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;n(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=c,e.isClass?e.body(this):e(this)}if(this.__pendingValue===c)return;const e=this.__pendingValue,t=this.value,i=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),s=null!=e&&(null==t||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),s&&(this.__options=$(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=c}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const $=e=>e&&(O?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);class I{handleAttributeExpressions(e,t,i,n,s){const o=t[0];return"."===o?new D(e,t.slice(1),i,s).parts:"@"===o?[new Y(e,t.slice(1),n.eventContext)]:"?"===o?[new A(e,t.slice(1),i)]:new k(e,t,i,s).parts}handleTextExpression(e,t){return new V(e,t)}}const j=new I;function H(e){let t=B.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},B.set(e.type,t));let i=t.stringsArray.get(e.strings);if(void 0!==i)return i;const n=e.strings.join(a);return i=t.keyString.get(n),void 0===i&&(i=new u(e,e.getTemplateElement()),t.keyString.set(n,i)),t.stringsArray.set(e.strings,i),i}const B=new Map,R=new WeakMap;"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.5");Object.freeze({__proto__:null,html:(e,...t)=>new x(e,t,"html",j),svg:(e,...t)=>new L(e,t,"svg",j),DefaultTemplateProcessor:I,defaultTemplateProcessor:j,directive:e=>(...t)=>{const i=e(...t);return i.isDirective=!0,i},Directive:class{constructor(){this.isDirective=!0,this.isClass=!0}body(e){}},isDirective:n,removeNodes:r,reparentNodes:o,noChange:c,nothing:l,AttributeCommitter:k,AttributePart:M,BooleanAttributePart:A,EventPart:Y,isIterable:P,isPrimitive:N,NodePart:V,PropertyCommitter:D,PropertyPart:X,get sanitizerFactory(){return C},setSanitizerFactory:e=>{if(C!==T)throw new Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");C=e},parts:R,render:(e,t,i)=>{let n=R.get(t);void 0===n&&(r(t,t.firstChild),R.set(t,n=new V(Object.assign({templateFactory:H},i),void 0)),n.appendInto(t)),n.setValue(e),n.commit()},templateCaches:B,templateFactory:H,TemplateInstance:y,SVGTemplateResult:L,TemplateResult:x,createMarker:f,isTemplatePartActive:p,Template:u});document.createElement("template");class F{constructor(){this.isAction=!0}}F.prototype.isAction=!0;document.createTextNode("");var W={ItemHold:function(e={}){let t;const i={time:1e3,movementThreshold:2,action(e,t){}};e=Object.assign(Object.assign({},i),e);const n={},s={x:0,y:0};function o(e){void 0!==n[e]&&delete n[e]}function r(i,r){function c(o){!function(i,o,r){if(void 0===n[i.id]){const c=t.normalizePointerEvent(r);n[i.id]={x:c.x,y:c.y},r.stopPropagation(),r.preventDefault(),setTimeout(()=>{if(void 0!==n[i.id]){let t=!0;const r=Math.abs(n[i.id].x-s.x),c=Math.abs(n[i.id].y-s.y);r>e.movementThreshold&&(t=!1),c>e.movementThreshold&&(t=!1),delete n[i.id],t&&e.action(o,i)}},e.time)}}(r.item,i,o)}function l(){o(r.item.id)}function a(e){const i=t.normalizePointerEvent(e);s.x=i.x,s.y=i.y}return i.addEventListener("mousedown",c),i.addEventListener("touchstart",c),document.addEventListener("mouseup",l),document.addEventListener("touchend",l),document.addEventListener("mousemove",a),document.addEventListener("touchmove",a),{update(e,t){r=t},destroy(e,t){document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",a),e.removeEventListener("mousedown",c),document.removeEventListener("touchend",o),document.removeEventListener("touchmove",a),e.removeEventListener("touchstart",c)}}}return function(e){t=e.api,e.state.update("config.actions.chart-timeline-items-row-item",e=>(e.push(r),e))}},ItemMovement:function(t={}){const i={moveable:!0,resizeable:!0,resizerContent:"",collisionDetection:!0,outOfBorders:!1,snapStart:(e,t)=>e+t,snapEnd:(e,t)=>e+t,ghostNode:!0,wait:0};t=Object.assign(Object.assign({},i),t);const n={};function s(i,s){if(!t.moveable&&!t.resizeable)return;const o=s.state,r=s.api;function c(e){let i=t.resizeable&&(!e.item.hasOwnProperty("resizeable")||!0===e.item.resizeable);return e.row.hasOwnProperty("resizeable")&&i&&(i=e.row.resizeable),i}function l(e){const t=e.item.id;return void 0===n[t]&&(n[t]={moving:!1,resizing:!1,waiting:!1}),n[t]}function a(e,t){o.update(`config.plugin.ItemMovement.items.${e}`,t),o.update("config.plugin.ItemMovement.movement",e=>(e||(e={moving:!1,waiting:!1}),e.moving=t.moving,e.waiting=t.waiting,e))}function d(e,n){if(t.ghostNode){const t=l(e),s=n.clientX-t.ganttLeft-t.itemLeftCompensation;t.ghost.style.left=s+"px",t.ghost.style.top=n.clientY-t.ganttTop-t.itemTop+parseInt(getComputedStyle(i)["margin-top"])+"px",a(e.item.id,t)}}function m(e){t.ghostNode&&void 0!==n[e]&&void 0!==n[e].ghost&&(o.get("_internal.elements.chart-timeline").removeChild(n[e].ghost),delete n[e].ghost,a(s.item.id,n[e]))}function h(e){let i=t.snapStart;return"function"==typeof e.item.snapStart&&(i=e.item.snapStart),i}function u(e){let i=t.snapEnd;return"function"==typeof e.item.snapEnd&&(i=e.item.snapEnd),i}const g=`<div class="${r.getClass("chart-timeline-items-row-item-resizer")}">${t.resizerContent}</div>`;i.insertAdjacentHTML("beforeend",g);const p=i.querySelector(".gantt-schedule-timeline-calendar__chart-timeline-items-row-item-resizer");function v(e){const n=r.normalizePointerEvent(e);if(("pointerdown"===e.type||"mousedown"===e.type)&&0!==e.button)return;const c=l(s);c.waiting=!0,a(s.item.id,c),setTimeout(()=>{if(e.stopPropagation(),e.preventDefault(),!c.waiting)return;c.moving=!0;const r=o.get(`config.chart.items.${s.item.id}`),d=o.get("_internal.chart.time.leftGlobal"),m=o.get("_internal.chart.time.timePerPixel"),h=o.get("_internal.elements.chart-timeline").getBoundingClientRect();c.ganttTop=h.top,c.ganttLeft=h.left,c.itemX=Math.round((r.time.start-d)/m),c.itemLeftCompensation=n.clientX-c.ganttLeft-c.itemX,a(s.item.id,c),function(e,n,s,r){const c=l(e);if(!t.ghostNode||void 0!==c.ghost)return;const d=i.cloneNode(!0),m=getComputedStyle(i),h=o.get("config.scroll.compensation.y");d.style.position="absolute",d.style.left=n.clientX-s-c.itemLeftCompensation+"px";const u=n.clientY-r-i.offsetTop-h+parseInt(m["margin-top"]);c.itemTop=u,d.style.top=n.clientY-r-u+"px",d.style.width=m.width,d.style["box-shadow"]="10px 10px 6px #00000020";const g=i.clientHeight+"px";d.style.height=g,d.style["line-height"]=i.clientHeight-18+"px",d.style.opacity="0.6",d.style.transform="scale(1.05, 1.05)",o.get("_internal.elements.chart-timeline").appendChild(d),c.ghost=d,a(e.item.id,c)}(s,n,h.left,h.top)},t.wait)}function f(e){if(e.stopPropagation(),e.preventDefault(),("pointerdown"===e.type||"mousedown"===e.type)&&0!==e.button)return;const t=r.normalizePointerEvent(e),i=l(s);i.resizing=!0;const n=o.get(`config.chart.items.${s.item.id}`),c=o.get("_internal.chart.time.leftGlobal"),d=o.get("_internal.chart.time.timePerPixel"),m=o.get("_internal.elements.chart-timeline").getBoundingClientRect();i.ganttTop=m.top,i.ganttLeft=m.left,i.itemX=(n.time.end-c)/d,i.itemLeftCompensation=t.clientX-i.ganttLeft-i.itemX,a(s.item.id,i)}function w(e,i,n,s){if(!t.collisionDetection)return!1;const c=o.get("_internal.chart.time");if(t.outOfBorders&&(n<c.from||s>c.to))return!0;let l=r.time.date(s).diff(n,"milliseconds");if(-1===Math.sign(l)&&(l=-l),l<=1)return!0;const a=o.get("config.list.rows."+e);for(const e of a._internal.items)if(e.id!==i){if(n>=e.time.start&&n<=e.time.end)return!0;if(s>=e.time.start&&s<=e.time.end)return!0;if(n<=e.time.start&&s>=e.time.end)return!0}return!1}function y(e){const i=l(s),n=r.normalizePointerEvent(e);let a,m,g,p,v;(i.moving||i.resizing)&&(e.stopPropagation(),e.preventDefault(),a=o.get(`config.chart.items.${s.item.id}`),m=o.get(`config.chart.items.${s.item.id}.rowId`),g=o.get(`config.list.rows.${m}`),p=o.get("config.chart.time.zoom"),v=o.get("_internal.chart.time.timePerPixel"));const f=function(e){let i=t.moveable;return e.item.hasOwnProperty("moveable")&&i&&(i=e.item.moveable),e.row.hasOwnProperty("moveable")&&i&&(i=e.row.moveable),i}(s);if(i.moving){if((!0===f||"x"===f||Array.isArray(f)&&f.includes(m))&&function(e,t,i,n,r){const c=l(s),a=e.clientX-c.ganttLeft-c.itemLeftCompensation;d(s,e);const m=o.get("_internal.chart.time.leftGlobal")+a*r-i.time.start,g=i.time.start,p=h(s)(i.time.start,m,i)-g,v=w(t.id,i.id,i.time.start+p,i.time.end+p);p&&!v&&o.update(`config.chart.items.${s.item.id}.time`,(function(e){return e.start+=p,e.end=u(s)(e.end,p,i)-1,e}))}(n,g,a,0,v),!f||"x"===f)return;let e=function(e,t,i,n,r){d(s,e);const c=l(s),a=e.clientY-c.ganttTop,m=o.get("_internal.list.visibleRows"),h=o.get("config.scroll.compensation.y");let u=0;for(const e of m){if(e.top+h>a)return u>0?u-1:0;u++}return u}(n);const t=o.get("_internal.list.visibleRows");void 0===t[e]&&(e>0?e=t.length-1:e<0&&(e=0));const i=t[e],r=i.id,c=w(r,a.id,a.time.start,a.time.end);r===a.rowId||c||Array.isArray(f)&&!f.includes(r)||i.hasOwnProperty("moveable")&&!i.moveable||o.update(`config.chart.items.${a.id}.rowId`,r)}else!i.resizing||void 0!==a.resizeable&&!0!==a.resizeable||function(e,t,i,n,r){if(!c(s))return;const a=o.get("_internal.chart.time"),d=l(s),m=e.clientX-d.ganttLeft-d.itemLeftCompensation,g=a.leftGlobal+m*r-i.time.end;if(i.time.end+g<i.time.start)return;const p=i.time.end,v=u(s)(i.time.end,g,i)-1-p,f=w(t.id,i.id,i.time.start,i.time.end+v);v&&!f&&o.update(`config.chart.items.${s.item.id}.time`,e=>(e.start=h(s)(e.start,0,i),e.end=u(s)(e.end,v,i)-1,e))}(n,g,a,0,v)}function b(e){const t=l(s);(t.moving||t.resizing)&&(e.stopPropagation(),e.preventDefault()),t.moving=!1,t.waiting=!1,t.resizing=!1,a(s,t);for(const e in n)n[e].moving=!1,n[e].resizing=!1,n[e].waiting=!1,m(e)}return c(s)?p.style.visibility="visible":p.style.visibility="hidden",e?(i.addEventListener("pointerdown",v),p.addEventListener("pointerdown",f),document.addEventListener("pointermove",y),document.addEventListener("pointerup",b)):(i.addEventListener("touchstart",v),p.addEventListener("touchstart",f),document.addEventListener("touchmove",y),document.addEventListener("touchend",b),document.addEventListener("touchcancel",b),i.addEventListener("mousedown",v),p.addEventListener("mousedown",f),document.addEventListener("mousemove",y),document.addEventListener("mouseup",b)),{update(e,t){c(t)||"visible"!==p.style.visibility?c(t)&&"hidden"===p.style.visibility&&(p.style.visibility="visible"):p.style.visibility="hidden",s=t},destroy(t,n){e?(i.removeEventListener("pointerdown",v),p.removeEventListener("pointerdown",f),document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",b)):(i.removeEventListener("mousedown",v),p.removeEventListener("mousedown",f),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",b),i.removeEventListener("touchstart",v),p.removeEventListener("touchstart",f),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",b),document.removeEventListener("touchcancel",b)),p.remove()}}}return function(e){e.state.update("config.actions.chart-timeline-items-row-item",e=>(e.push(s),e))}},Selection:function(e={}){let t,n,s,o;const r="config.plugin.selection",c="gantt-schedule-timeline-caledar__plugin-selection-rect",l=document.createElement("div");l.classList.add(c),l.style.visibility="hidden",l.style.left="0px",l.style.top="0px",l.style.width="0px",l.style.height="0px",l.style.background="rgba(0, 119, 192, 0.2)",l.style.border="2px dashed rgba(0, 119, 192, 0.75)",l.style.position="absolute",l.style["user-select"]="none",l.style["pointer-events"]="none";const a={grid:!1,items:!0,rows:!1,horizontal:!0,vertical:!0,rectStyle:{},selecting(){},deselecting(){},selected(){},deselected(){},canSelect:(e,t,i)=>t,canDeselect:(e,t,i)=>[],getApi(){}};e=Object.assign(Object.assign({},a),e);for(const t in e.rectStyle)l.style[t]=e.rectStyle[t];const d={fromX:-1,fromY:-1,toX:-1,toY:-1,startX:-1,startY:-1,startCell:!1,selecting:!1},m={"chart-timeline-grid-row":e=>e.row.id,"chart-timeline-grid-row-block":e=>e.id,"chart-timeline-items-row":e=>e.row.id,"chart-timeline-items-row-item":e=>e.item.id};function h(e,t=!1){t?n.update(`${r}.selecting`,t=>{for(const i in t)e[i].forEach(e=>{t[i].includes()||t[i].push(e)});return t}):n.update(`${r}.selecting`,e),n.update("config.chart.items",(function(t){const i=e["chart-timeline-items-row-items"];for(const e in t){const n=t[e];i.includes(n.id)?n.selecting=!0:n.selecting=!1}return t}),{only:["selecting"]}),n.update("_internal.chart.grid.rowsWithBlocks",(function(t){const i=e["chart-timeline-grid-row-blocks"],n=e["chart-timeline-grid-rows"];if(t)for(const e of t){n.includes(e.id)?e.selecting=!0:e.selecting=!1;for(const t of e.blocks)i.includes(t.id)?t.selecting=!0:t.selecting=!1}return t}))}function u(t=!1,i=!1){let s;i?n.update(r,e=>(s={selecting:{"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]},selected:e.selected},s)):(n.update(r,i=>(s={selecting:{"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]},selected:{"chart-timeline-grid-rows":t?[]:e.canDeselect("chart-timeline-grid-rows",i.selected["chart-timeline-grid-rows"],i),"chart-timeline-grid-row-blocks":t?[]:e.canDeselect("chart-timeline-grid-row-blocks",i.selected["chart-timeline-grid-row-blocks"],i),"chart-timeline-items-rows":t?[]:e.canDeselect("chart-timeline-items-rows",i.selected["chart-timeline-items-rows"],i),"chart-timeline-items-row-items":t?[]:e.canDeselect("chart-timeline-items-row-items",i.selected["chart-timeline-items-row-items"],i)}},s)),n.update("_internal.chart.grid.rowsWithBlocks",(function(e){if(e)for(const t of e)for(const e of t.blocks)e.selected=s.selected["chart-timeline-grid-row-blocks"].includes(e.id),e.selecting=!1;return e})),n.update("config.chart.items",e=>{if(e)for(const t in e){const i=e[t];i.selected=s.selected["chart-timeline-items-row-items"].includes(t),i.selecting=!1}return e}))}let g;function p(t=!1){d.selecting=!1,l.style.visibility="hidden";const i=v(n.get(r)),s={};t?n.update(r,e=>{const t=Object.assign({},e.selecting);for(const i in e.selected)for(const n of t[i])e.selected[i].includes(n)||e.selected[i].push(n);return s.selected=Object.assign({},e.selected),s.selecting={"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]},s}):n.update(r,e=>(s.selected=Object.assign({},e.selecting),s.selecting={"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]},s));const o=n.get("_internal.elements");for(const t in m)if(o[t+"s"])for(const n of o[t+"s"])i.selecting[t+"s"].includes(n.vido.id)&&e.deselecting(n.vido,t);n.update("config.chart.items",(function(n){for(const s in n){const o=n[s];i.selecting["chart-timeline-items-row-items"].includes(o.id)?(void 0!==o.selected&&o.selected||e.selected(o,"chart-timeline-items-row-item"),o.selected=!0):t&&g.selected["chart-timeline-items-row-items"].includes(o.id)?o.selected=!0:(i.selected["chart-timeline-items-row-items"].includes(o.id)&&e.deselected(o,"chart-timeline-items-row-item"),o.selected=!1)}return n})),n.update("_internal.chart.grid.rowsWithBlocks",(function(n){if(n)for(const s of n)for(const n of s.blocks)i.selecting["chart-timeline-grid-row-blocks"].includes(n.id)?(void 0!==n.selected&&n.selected||e.selected(n,"chart-timeline-grid-row-block"),n.selected=!0):t&&g.selected["chart-timeline-grid-row-blocks"].includes(n.id)?n.selected=!0:(i.selected["chart-timeline-grid-row-blocks"].includes(n.id)&&e.deselected(n,"chart-timeline-grid-row-block"),n.selected=!1);return n}))}function v(e){const t={};return t.selecting=Object.assign({},e.selecting),t.selecting["chart-timeline-grid-rows"]=e.selecting["chart-timeline-grid-rows"].slice(),t.selecting["chart-timeline-grid-row-blocks"]=e.selecting["chart-timeline-grid-row-blocks"].slice(),t.selecting["chart-timeline-items-rows"]=e.selecting["chart-timeline-items-rows"].slice(),t.selecting["chart-timeline-items-row-items"]=e.selecting["chart-timeline-items-row-items"].slice(),t.selected=Object.assign({},e.selected),t.selected["chart-timeline-grid-rows"]=e.selected["chart-timeline-grid-rows"].slice(),t.selected["chart-timeline-grid-row-blocks"]=e.selected["chart-timeline-grid-row-blocks"].slice(),t.selected["chart-timeline-items-rows"]=e.selected["chart-timeline-items-rows"].slice(),t.selected["chart-timeline-items-row-items"]=e.selected["chart-timeline-items-row-items"].slice(),t}class f extends i{constructor(i,s){super();const o={};o.clearSelection=u,this.unsub=s.state.subscribeAll(["_internal.elements.chart-timeline","_internal.chart.dimensions.width"],e=>{const t=n.get("_internal.elements.chart-timeline");if(void 0===t)return;this.chartTimeline=t,this.chartTimeline.querySelector("."+c)||this.chartTimeline.insertAdjacentElement("beforeend",l);const i=this.chartTimeline.getBoundingClientRect();this.left=i.left,this.top=i.top});const a=e=>{const i=t.api.normalizePointerEvent(e),n=i.x-this.left,s=i.y-this.top;n<=d.startX?(d.fromX=n,d.toX=d.startX):(d.fromX=d.startX,d.toX=n),s<=d.startY?(d.fromY=s,d.toY=d.startY):(d.fromY=d.startY,d.toY=s)},f=(e,t)=>{let i=!1,n=!1;return(e.left>t.left&&e.left<t.right||e.right>t.left&&e.right<t.right||e.left<=t.left&&e.right>=t.right)&&(i=!0),(e.top>t.top&&e.top<t.bottom||e.bottom>t.top&&e.bottom<t.bottom||e.top<=t.top&&e.bottom>=t.bottom)&&(n=!0),i&&n};function w(t,i,s,o){const c=[],l=[],a=i[s+"s"];if(!a)return[];const d=n.get(r),m=d.selecting[s+"s"];for(const i of a){const n=i.getBoundingClientRect();if(f(n,t)){l.push(i.vido),e.canSelect(s,l,d).includes(i.vido)?(m.includes(o(i.vido))||e.selecting(i.vido,s),c.push(o(i.vido))):l.unshift()}else m.includes(o(i.vido))&&e.deselecting(i.vido,s)}return c}const y=e=>{if(d.selecting){{e.stopPropagation(),e.preventDefault();const i=t.api.normalizePointerEvent(e);if(d.fromX===i.x-this.left&&d.fromY===i.y-this.top)return d.selecting=!1,void(l.style.visibility="hidden")}p(e.ctrlKey)}else{const t=".gantt-schedule-timeline-calendar__chart-timeline-items-row-item";!!e.target.closest(t)?p(e.ctrlKey):e.ctrlKey||u()}};this.mouseDown=e=>{const i=n.get("config.plugin.ItemMovement.movement"),s=i&&i.moving;if("mousedown"===e.type&&0!==e.button||s)return;const o=t.api.normalizePointerEvent(e);d.selecting=!0,d.fromX=o.x-this.left,d.fromY=o.y-this.top,d.startX=d.fromX,d.startY=d.fromY,g=v(n.get(r));!!e.target.closest(".gantt-schedule-timeline-calendar__chart-timeline-items-row-item")||e.ctrlKey||u()},this.mouseMove=e=>{!function(e,t=!1){const i=n.get("config.plugin.ItemMovement.movement"),s=i&&(i.moving||i.waiting);if(!d.selecting||s)return void(s&&(d.selecting=!1));u(!1,!0),a(e),l.style.left=d.fromX+"px",l.style.top=d.fromY+"px",l.style.width=d.toX-d.fromX+"px",l.style.height=d.toY-d.fromY+"px",t||(l.style.visibility="visible");const o=l.getBoundingClientRect(),r=n.get("_internal.elements"),c={};for(const e in m)c[e+"s"]=w(o,r,e,m[e]);h(c,e.ctrlKey)}(e)},this.mouseUp=e=>{d.selecting&&y(e)},i.addEventListener("mousedown",this.mouseDown),i.addEventListener("touchstart",this.mouseDown),document.addEventListener("mousemove",this.mouseMove),document.addEventListener("touchmove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp),document.addEventListener("touchend",this.mouseUp),e.getApi(o)}destroy(e){document.removeEventListener("mouseup",this.mouseUp),document.removeEventListener("touchend",this.mouseUp),document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("touchmove",this.mouseMove),e.removeEventListener("mousedown",this.mouseDown),e.removeEventListener("touchstart",this.mouseDown),this.unsub()}}function w(e,t,i,n,s){t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n),i&&!e.classList.contains(s)?e.classList.add(s):!i&&e.classList.contains(s)&&e.classList.remove(s)}class y extends i{constructor(e,t){super(),this.classNameSelecting=s.getClass("chart-timeline-grid-row-block")+"--selecting",this.classNameSelected=s.getClass("chart-timeline-grid-row-block")+"--selected",w(e,t.selecting,t.selected,this.classNameSelecting,this.classNameSelected)}update(e,t){w(e,t.selecting,t.selected,this.classNameSelecting,this.classNameSelected)}destroy(e,t){e.classList.remove(this.classNameSelecting),e.classList.remove(this.classNameSelected)}}class b extends i{constructor(e,t){super(),this.data=t,this.element=e,this.classNameSelecting=s.getClass("chart-timeline-items-row-item")+"--selecting",this.classNameSelected=s.getClass("chart-timeline-items-row-item")+"--selected",this.data=t,this.element=e,this.onPointerDown=this.onPointerDown.bind(this),e.addEventListener("mousedown",this.onPointerDown),e.addEventListener("touchstart",this.onPointerDown),w(e,t.item.selecting,t.item.selected,this.classNameSelecting,this.classNameSelected)}onPointerDown(e){g=v(n.get(r)),d.selecting=!0,this.data.item.selected=!0;const t={"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]};t["chart-timeline-items-row-items"].push(this.data.item.id),h(t),p(e.ctrlKey),w(this.element,this.data.item.selecting,this.data.item.selected,this.classNameSelecting,this.classNameSelected)}update(e,t){w(e,t.item.selecting,t.item.selected,this.classNameSelecting,this.classNameSelected),this.data=t}destroy(e,t){e.classList.remove(this.classNameSelecting),e.classList.remove(this.classNameSelected),e.removeEventListener("mousedown",this.onPointerDown),e.removeEventListener("touchstart",this.onPointerDown)}}function _(e){const t=n.get("config.plugin.selection.selected.chart-timeline-grid-row-blocks");for(const i of t)if(i===e.id)return e.selected=!0,e;return e.selected=!1,e.selecting=!1,e}return function(e){t=e,n=t.state,s=t.api,o=t.schedule,void 0===n.get(r)&&n.update(r,{selecting:{"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]},selected:{"chart-timeline-grid-rows":[],"chart-timeline-grid-row-blocks":[],"chart-timeline-items-rows":[],"chart-timeline-items-row-items":[]}}),n.update("config.chart.items",e=>{if(e)for(const t in e){const i=e[t];void 0===i.selecting&&(i.selecting=!1),void 0===i.selected&&(i.selected=!1)}return e}),n.update("config.actions.chart-timeline",e=>(e.push(f),e)),n.update("config.actions.chart-timeline-grid-row-block",e=>(e.push(y),e)),n.update("config.actions.chart-timeline-items-row-item",e=>(e.push(b),e)),n.update("config.chart.grid.block.onCreate",e=>(e.push(_),e))}},CalendarScroll:function(e={}){let t,i,n;const s={speed:1,hideScroll:!1,onChange(e){}};e=Object.assign(Object.assign({},s),e);class o extends F{constructor(i){super(),this.isMoving=!1,this.lastX=0,this.onPointerStart=this.onPointerStart.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerEnd=this.onPointerEnd.bind(this),i.addEventListener("touchstart",this.onPointerStart),document.addEventListener("touchmove",this.onPointerMove),document.addEventListener("touchend",this.onPointerEnd),i.addEventListener("mousedown",this.onPointerStart),document.addEventListener("mousemove",this.onPointerMove),document.addEventListener("mouseup",this.onPointerEnd),i.style.cursor="move";const n=t.get("_internal.elements.horizontal-scroll");e.hideScroll&&n&&(n.style.visibility="hidden")}onPointerStart(e){if("mousedown"===e.type&&0!==e.button)return;e.stopPropagation(),this.isMoving=!0;const t=i.normalizePointerEvent(e);this.lastX=t.x}onPointerMove(s){n(()=>{if(!this.isMoving)return;const n=i.normalizePointerEvent(s),o=n.x-this.lastX,r=t.get("_internal.chart.time"),c=-Math.round(o*r.timePerPixel*e.speed);t.update("config.chart.time",t=>(0===t.from&&(t.from=r.from),0===t.to&&(t.to=r.to),t.from+=c,t.to+=c,e.onChange(t),t)),this.lastX=n.x})()}onPointerEnd(){this.isMoving=!1,this.lastX=0}destroy(e,t){e.removeEventListener("touchstart",this.onPointerStart),document.removeEventListener("touchmove",this.onPointerMove),document.removeEventListener("touchend",this.onPointerEnd),e.removeEventListener("mousedown",this.onPointerStart),document.removeEventListener("mousemove",this.onPointerMove),document.removeEventListener("mouseup",this.onPointerEnd)}}return function(e){i=e.api,t=e.state,n=e.schedule,t.update("config.actions.chart-calendar",e=>(e.push(o),e))}},WeekendHighlight:function(e={}){const t=e.weekdays||[6,0];let n,s;class o extends i{constructor(e,t){super(),this.highlight(e,t.time.leftGlobal)}update(e,t){this.highlight(e,t.time.leftGlobal)}highlight(e,i){const o=t.includes(s.time.date(i).day()),r=e.classList.contains(n);!r&&o?e.classList.add(n):r&&!o&&e.classList.remove(n)}}return function(t){s=t.api,n=e.className||s.getClass("chart-timeline-grid-row-block")+"--weekend",t.state.update("config.actions.chart-timeline-grid-row-block",e=>(e.push(o),e))}}};export default W;
