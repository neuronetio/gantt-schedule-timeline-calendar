!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).TimeBookmarks={})}(this,(function(t){"use strict";
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */const e=t=>null!=t&&"boolean"==typeof t.isDirective,n="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,i=(t,e,n=null,i=null)=>{for(;e!==n;){const n=e.nextSibling;t.insertBefore(e,i),e=n}},r=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}},s={},o={},a=`{{lit-${String(Math.random()).slice(2)}}}`,u=`\x3c!--${a}--\x3e`,l=new RegExp(`${a}|${u}`);
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */class c{constructor(t,e){this.parts=[],this.element=e;const n=[],i=[],r=document.createTreeWalker(e.content,133,null,!1);let s=0,o=-1,u=0;const{strings:c,values:{length:f}}=t;for(;u<f;){const t=r.nextNode();if(null!==t){if(o++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let i=0;for(let t=0;t<n;t++)h(e[t].name,"$lit$")&&i++;for(;i-- >0;){const e=c[u],n=v.exec(e)[2],i=n.toLowerCase()+"$lit$",r=t.getAttribute(i);t.removeAttribute(i);const s=r.split(l);this.parts.push({type:"attribute",index:o,name:n,strings:s}),u+=s.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),r.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(a)>=0){const i=t.parentNode,r=e.split(l),s=r.length-1;for(let e=0;e<s;e++){let n,s=r[e];if(""===s)n=p();else{const t=v.exec(s);null!==t&&h(t[2],"$lit$")&&(s=s.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),n=document.createTextNode(s)}i.insertBefore(n,t),this.parts.push({type:"node",index:++o})}""===r[s]?(i.insertBefore(p(),t),n.push(t)):t.data=r[s],u+=s}}else if(8===t.nodeType)if(t.data===a){const e=t.parentNode;null!==t.previousSibling&&o!==s||(o++,e.insertBefore(p(),t)),s=o,this.parts.push({type:"node",index:o}),null===t.nextSibling?t.data="":(n.push(t),o--),u++}else{let e=-1;for(;-1!==(e=t.data.indexOf(a,e+1));)this.parts.push({type:"node",index:-1}),u++}}else r.currentNode=i.pop()}for(const t of n)t.parentNode.removeChild(t)}}const h=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},f=t=>-1!==t.index,d=document.createComment(""),p=()=>d.cloneNode(),v=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */class y{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=n?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],i=this.template.parts,r=document.createTreeWalker(t,133,null,!1);let s,o=0,a=0,u=r.nextNode();for(;o<i.length;)if(s=i[o],f(s)){for(;a<s.index;)a++,"TEMPLATE"===u.nodeName&&(e.push(u),r.currentNode=u.content),null===(u=r.nextNode())&&(r.currentNode=e.pop(),u=r.nextNode());if("node"===s.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(u.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(u,s.name,s.strings,this.options));o++}else this.__parts.push(void 0),o++;return n&&(document.adoptNode(t),customElements.upgrade(t)),t
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */}}const g=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),m=` ${a} `,_=document.createElement("template");class b{constructor(t,e,n,i){this.strings=t,this.values=e,this.type=n,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let i=0;i<t;i++){const t=this.strings[i],r=t.lastIndexOf("\x3c!--");n=(r>-1||n)&&-1===t.indexOf("--\x3e",r+1);const s=v.exec(t);e+=null===s?t+(n?m:u):t.substr(0,s.index)+s[1]+s[2]+"$lit$"+s[3]+a}return e+=this.strings[t],e}getTemplateElement(){const t=_.cloneNode();let e=this.getHTML();return void 0!==g&&(e=g.createHTML(e)),t.innerHTML=e,t}}class x extends b{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,n=e.firstChild;return e.removeChild(n),i(e,n.firstChild),t
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */}}const w=t=>null===t||!("object"==typeof t||"function"==typeof t),S=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]),$=document.createTextNode("");class M{constructor(t,e,n){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new N(this)}_getValue(){const t=this.strings,e=t.length-1,n=this.parts;if(1===e&&""===t[0]&&""===t[1]){const t=n[0].value;if("symbol"==typeof t)return String(t);if("string"==typeof t||!S(t))return t}let i="";for(let r=0;r<e;r++){i+=t[r];const e=n[r];if(void 0!==e){const t=e.value;if(w(t)||!S(t))i+="string"==typeof t?t:String(t);else for(const e of t)i+="string"==typeof e?e:String(e)}}return i+=t[e],i}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class N{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===s||w(t)&&t===this.value||(this.value=t,e(t)||(this.committer.dirty=!0))}commit(){for(;e(this.value);){const t=this.value;this.value=s,t.isClass?t.body(this):t(this)}this.value!==s&&this.committer.commit()}}class C{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(p()),this.endNode=t.appendChild(p())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=p()),t.__insert(this.endNode=p())}insertAfterPart(t){t.__insert(this.startNode=p()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;e(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=s,t.isClass?t.body(this):t(this)}const t=this.__pendingValue;t!==s&&(w(t)?t!==this.value&&this.__commitText(t):t instanceof b?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):S(t)?this.__commitIterable(t):t===o?(this.value=o,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);if(e===this.endNode.previousSibling&&3===e.nodeType)e.data=n;else{const t=$.cloneNode();t.textContent=n,this.__commitNode(t)}this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof y&&this.value.template===e)this.value.update(t.values);else{const n=new y(e,t.processor,this.options),i=n._clone();n.update(t.values),this.__commitNode(i),this.value=n}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,i=0;for(const r of t)n=e[i],void 0===n&&(n=new C(this.options),e.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(e[i-1])),n.setValue(r),n.commit(),i++;i<e.length&&(e.length=i,this.clear(n&&n.endNode))}clear(t=this.startNode){r(this.startNode.parentNode,t.nextSibling,this.endNode)}}class k{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;e(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=s,t.isClass?t.body(this):t(this)}if(this.__pendingValue===s)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=s}}class P extends M{constructor(t,e,n){super(t,e,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new D(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class D extends N{}let O=!1;(()=>{try{const t={get capture(){return O=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class L{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;e(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=s,t.isClass?t.body(this):t(this)}if(this.__pendingValue===s)return;const t=this.__pendingValue,n=this.value,i=null==t||null!=n&&(t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive),r=null!=t&&(null==n||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=B(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=s}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const B=t=>t&&(O?{capture:t.capture,passive:t.passive,once:t.once}:t.capture
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */);class R{handleAttributeExpressions(t,e,n,i){const r=e[0];return"."===r?new P(t,e.slice(1),n).parts:"@"===r?[new L(t,e.slice(1),i.eventContext)]:"?"===r?[new k(t,e.slice(1),n)]:new M(t,e,n).parts}handleTextExpression(t){return new C(t)}}const A=new R;
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */function T(t){let e=I.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},I.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const i=t.strings.join(a);return n=e.keyString.get(i),void 0===n&&(n=new c(t,t.getTemplateElement()),e.keyString.set(i,n)),e.stringsArray.set(t.strings,n),n}const I=new Map,E=new WeakMap;
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */
/**
	 * @license
	 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
	 * This code may only be used under the BSD style license found at
	 * http://polymer.github.io/LICENSE.txt
	 * The complete set of authors may be found at
	 * http://polymer.github.io/AUTHORS.txt
	 * The complete set of contributors may be found at
	 * http://polymer.github.io/CONTRIBUTORS.txt
	 * Code distributed by Google as part of the polymer project is also
	 * subject to an additional IP rights grant found at
	 * http://polymer.github.io/PATENTS.txt
	 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");Object.freeze({__proto__:null,html:(t,...e)=>new b(t,e,"html",A),svg:(t,...e)=>new x(t,e,"svg",A),DefaultTemplateProcessor:R,defaultTemplateProcessor:A,directive:t=>(...e)=>{const n=t(...e);return n.isDirective=!0,n},Directive:class{constructor(){this.isDirective=!0,this.isClass=!0}body(t){}},isDirective:e,removeNodes:r,reparentNodes:i,noChange:s,nothing:o,AttributeCommitter:M,AttributePart:N,BooleanAttributePart:k,EventPart:L,isIterable:S,isPrimitive:w,NodePart:C,PropertyCommitter:P,PropertyPart:D,parts:E,render:(t,e,n)=>{let i=E.get(e);void 0===i&&(r(e,e.firstChild),E.set(e,i=new C(Object.assign({templateFactory:T},n))),i.appendInto(e)),i.setValue(t),i.commit()},templateCaches:I,templateFactory:T,TemplateInstance:y,SVGTemplateResult:x,TemplateResult:b,createMarker:p,isTemplatePartActive:f,Template:c});document.createElement("template"),document.createTextNode("");var V="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function z(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function H(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})})),e}var j=z((function(t,e){var n;t.exports=(n=n||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},r=i.lib={},s=r.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=s.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var s=0;s<r;s++){var o=n[s>>>2]>>>24-s%4*8&255;e[i+s>>>2]|=o<<24-(i+s)%4*8}else for(s=0;s<r;s+=4)e[i+s>>>2]=n[s>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],r=function(e){e=e;var n=987654321,i=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&i)<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i;return r/=4294967296,(r+=.5)*(t.random()>.5?1:-1)}},s=0;s<e;s+=4){var a=r(4294967296*(n||t.random()));n=987654071*a(),i.push(4294967296*a()|0)}return new o.init(i,e)}}),a=i.enc={},u=a.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var s=e[r>>>2]>>>24-r%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new o.init(n,e/2)}},l=a.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var s=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new o.init(n,e)}},c=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,s=this.blockSize,a=r/(4*s),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,l=t.min(4*u,r);if(u){for(var c=0;c<u;c+=s)this._doProcessBlock(i,c);var h=i.splice(0,u);n.sigBytes-=l}return new o.init(h,l)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),f=(r.Hasher=h.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}}),i.algo={});return i}(Math),n)})),W=(z((function(t,e){var n;t.exports=(n=j,function(){var t=n,e=t.lib,i=e.WordArray,r=e.Hasher,s=t.algo,o=[],a=s.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],s=n[2],a=n[3],u=n[4],l=0;l<80;l++){if(l<16)o[l]=0|t[e+l];else{var c=o[l-3]^o[l-8]^o[l-14]^o[l-16];o[l]=c<<1|c>>>31}var h=(i<<5|i>>>27)+u+o[l];h+=l<20?1518500249+(r&s|~r&a):l<40?1859775393+(r^s^a):l<60?(r&s|r&a|s&a)-1894007588:(r^s^a)-899497514,u=a,a=s,s=r<<30|r>>>2,r=i,i=h}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=r._createHelper(a),t.HmacSHA1=r._createHmacHelper(a)}(),n.SHA1)})),z((function(t,e){var n;t.exports=(n=j,void function(){var t=n,e=t.lib.Base,i=t.enc.Utf8;t.algo.HMAC=e.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=i.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var s=this._oKey=e.clone(),o=this._iKey=e.clone(),a=s.words,u=o.words,l=0;l<n;l++)a[l]^=1549556828,u[l]^=909522486;s.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})}())})),z((function(t,e){var n;t.exports=(n=j,function(){var t=n,e=t.lib,i=e.Base,r=e.WordArray,s=t.algo,o=s.SHA1,a=s.HMAC,u=s.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=a.create(n.hasher,t),s=r.create(),o=r.create([1]),u=s.words,l=o.words,c=n.keySize,h=n.iterations;u.length<c;){var f=i.update(e).finalize(o);i.reset();for(var d=f.words,p=d.length,v=f,y=1;y<h;y++){v=i.finalize(v),i.reset();for(var g=v.words,m=0;m<p;m++)d[m]^=g[m]}s.concat(f),l[0]++}return s.sigBytes=4*c,s}});t.PBKDF2=function(t,e,n){return u.create(n).compute(t,e)}}(),n.PBKDF2)})),z((function(t,e){var n;t.exports=(n=j,function(){var t=n,e=t.lib.WordArray;function i(t,n,i){for(var r=[],s=0,o=0;o<n;o++)if(o%4){var a=i[t.charCodeAt(o-1)]<<o%4*2,u=i[t.charCodeAt(o)]>>>6-o%4*2;r[s>>>2]|=(a|u)<<24-s%4*8,s++}return e.create(r,s)}t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],s=0;s<n;s+=3)for(var o=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<n;a++)r.push(i.charAt(o>>>6*(3-a)&63));var u=i.charAt(64);if(u)for(;r.length%4;)r.push(u);return r.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var s=0;s<n.length;s++)r[n.charCodeAt(s)]=s}var o=n.charAt(64);if(o){var a=t.indexOf(o);-1!==a&&(e=a)}return i(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)})),z((function(t,e){var n;t.exports=(n=j,function(t){var e=n,i=e.lib,r=i.WordArray,s=i.Hasher,o=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var u=o.MD5=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var i=e+n,r=t[i];t[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s=this._hash.words,o=t[e+0],u=t[e+1],d=t[e+2],p=t[e+3],v=t[e+4],y=t[e+5],g=t[e+6],m=t[e+7],_=t[e+8],b=t[e+9],x=t[e+10],w=t[e+11],S=t[e+12],$=t[e+13],M=t[e+14],N=t[e+15],C=s[0],k=s[1],P=s[2],D=s[3];C=l(C,k,P,D,o,7,a[0]),D=l(D,C,k,P,u,12,a[1]),P=l(P,D,C,k,d,17,a[2]),k=l(k,P,D,C,p,22,a[3]),C=l(C,k,P,D,v,7,a[4]),D=l(D,C,k,P,y,12,a[5]),P=l(P,D,C,k,g,17,a[6]),k=l(k,P,D,C,m,22,a[7]),C=l(C,k,P,D,_,7,a[8]),D=l(D,C,k,P,b,12,a[9]),P=l(P,D,C,k,x,17,a[10]),k=l(k,P,D,C,w,22,a[11]),C=l(C,k,P,D,S,7,a[12]),D=l(D,C,k,P,$,12,a[13]),P=l(P,D,C,k,M,17,a[14]),C=c(C,k=l(k,P,D,C,N,22,a[15]),P,D,u,5,a[16]),D=c(D,C,k,P,g,9,a[17]),P=c(P,D,C,k,w,14,a[18]),k=c(k,P,D,C,o,20,a[19]),C=c(C,k,P,D,y,5,a[20]),D=c(D,C,k,P,x,9,a[21]),P=c(P,D,C,k,N,14,a[22]),k=c(k,P,D,C,v,20,a[23]),C=c(C,k,P,D,b,5,a[24]),D=c(D,C,k,P,M,9,a[25]),P=c(P,D,C,k,p,14,a[26]),k=c(k,P,D,C,_,20,a[27]),C=c(C,k,P,D,$,5,a[28]),D=c(D,C,k,P,d,9,a[29]),P=c(P,D,C,k,m,14,a[30]),C=h(C,k=c(k,P,D,C,S,20,a[31]),P,D,y,4,a[32]),D=h(D,C,k,P,_,11,a[33]),P=h(P,D,C,k,w,16,a[34]),k=h(k,P,D,C,M,23,a[35]),C=h(C,k,P,D,u,4,a[36]),D=h(D,C,k,P,v,11,a[37]),P=h(P,D,C,k,m,16,a[38]),k=h(k,P,D,C,x,23,a[39]),C=h(C,k,P,D,$,4,a[40]),D=h(D,C,k,P,o,11,a[41]),P=h(P,D,C,k,p,16,a[42]),k=h(k,P,D,C,g,23,a[43]),C=h(C,k,P,D,b,4,a[44]),D=h(D,C,k,P,S,11,a[45]),P=h(P,D,C,k,N,16,a[46]),C=f(C,k=h(k,P,D,C,d,23,a[47]),P,D,o,6,a[48]),D=f(D,C,k,P,m,10,a[49]),P=f(P,D,C,k,M,15,a[50]),k=f(k,P,D,C,y,21,a[51]),C=f(C,k,P,D,S,6,a[52]),D=f(D,C,k,P,p,10,a[53]),P=f(P,D,C,k,x,15,a[54]),k=f(k,P,D,C,u,21,a[55]),C=f(C,k,P,D,_,6,a[56]),D=f(D,C,k,P,N,10,a[57]),P=f(P,D,C,k,g,15,a[58]),k=f(k,P,D,C,$,21,a[59]),C=f(C,k,P,D,v,6,a[60]),D=f(D,C,k,P,w,10,a[61]),P=f(P,D,C,k,d,15,a[62]),k=f(k,P,D,C,b,21,a[63]),s[0]=s[0]+C|0,s[1]=s[1]+k|0,s[2]=s[2]+P|0,s[3]=s[3]+D|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var s=t.floor(i/4294967296),o=i;n[15+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,u=a.words,l=0;l<4;l++){var c=u[l];u[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return a},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});function l(t,e,n,i,r,s,o){var a=t+(e&n|~e&i)+r+o;return(a<<s|a>>>32-s)+e}function c(t,e,n,i,r,s,o){var a=t+(e&i|n&~i)+r+o;return(a<<s|a>>>32-s)+e}function h(t,e,n,i,r,s,o){var a=t+(e^n^i)+r+o;return(a<<s|a>>>32-s)+e}function f(t,e,n,i,r,s,o){var a=t+(n^(e|~i))+r+o;return(a<<s|a>>>32-s)+e}e.MD5=s._createHelper(u),e.HmacMD5=s._createHmacHelper(u)}(Math),n.MD5)})),z((function(t,e){var n;t.exports=(n=j,function(){var t=n,e=t.lib,i=e.Base,r=e.WordArray,s=t.algo,o=s.MD5,a=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=n.hasher.create(),s=r.create(),o=s.words,a=n.keySize,u=n.iterations;o.length<a;){l&&i.update(l);var l=i.update(t).finalize(e);i.reset();for(var c=1;c<u;c++)l=i.finalize(l),i.reset();s.concat(l)}return s.sigBytes=4*a,s}});t.EvpKDF=function(t,e,n){return a.create(n).compute(t,e)}}(),n.EvpKDF)})),z((function(t,e){var n;t.exports=void((n=j).lib.Cipher||function(t){var e=n,i=e.lib,r=i.Base,s=i.WordArray,o=i.BufferedBlockAlgorithm,a=e.enc,u=(a.Utf8,a.Base64),l=e.algo.EvpKDF,c=i.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?_:g}return function(e){return{encrypt:function(n,i,r){return t(i).encrypt(e,n,i,r)},decrypt:function(n,i,r){return t(i).decrypt(e,n,i,r)}}}}()}),h=(i.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),e.mode={}),f=i.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),d=h.CBC=function(){var e=f.extend();function n(e,n,i){var r=this._iv;if(r){var s=r;this._iv=t}else s=this._prevBlock;for(var o=0;o<i;o++)e[n+o]^=s[o]}return e.Encryptor=e.extend({processBlock:function(t,e){var i=this._cipher,r=i.blockSize;n.call(this,t,e,r),i.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),e.Decryptor=e.extend({processBlock:function(t,e){var i=this._cipher,r=i.blockSize,s=t.slice(e,e+r);i.decryptBlock(t,e),n.call(this,t,e,r),this._prevBlock=s}}),e}(),p=(e.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,i=n-t.sigBytes%n,r=i<<24|i<<16|i<<8|i,o=[],a=0;a<i;a+=4)o.push(r);var u=s.create(o,i);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},v=(i.BlockCipher=c.extend({cfg:c.cfg.extend({mode:d,padding:p}),reset:function(){c.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=n.createEncryptor;else i=n.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==i?this._mode.init(this,e&&e.words):(this._mode=i.call(n,this,e&&e.words),this._mode.__creator=i)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4}),i.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),y=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var i=s.create([1398893684,1701076831]).concat(n).concat(e);else i=e;return i.toString(u)},parse:function(t){var e=u.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var i=s.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return v.create({ciphertext:e,salt:i})}},g=i.SerializableCipher=r.extend({cfg:r.extend({format:y}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var r=t.createEncryptor(n,i),s=r.finalize(e),o=r.cfg;return v.create({ciphertext:s,key:n,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,n,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(n,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),m=(e.kdf={}).OpenSSL={execute:function(t,e,n,i){i||(i=s.random(8));var r=l.create({keySize:e+n}).compute(t,i),o=s.create(r.words.slice(e),4*n);return r.sigBytes=4*e,v.create({key:r,iv:o,salt:i})}},_=i.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:m}),encrypt:function(t,e,n,i){var r=(i=this.cfg.extend(i)).kdf.execute(n,t.keySize,t.ivSize);i.iv=r.iv;var s=g.encrypt.call(this,t,e,r.key,i);return s.mixIn(r),s},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var r=i.kdf.execute(n,t.keySize,t.ivSize,e.salt);return i.iv=r.iv,g.decrypt.call(this,t,e,r.key,i)}})}())})),z((function(t,e){var n;t.exports=(n=j,function(){var t=n,e=t.lib.BlockCipher,i=t.algo,r=[],s=[],o=[],a=[],u=[],l=[],c=[],h=[],f=[],d=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,i=0;for(e=0;e<256;e++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,r[n]=p,s[p]=n;var v=t[n],y=t[v],g=t[y],m=257*t[p]^16843008*p;o[n]=m<<24|m>>>8,a[n]=m<<16|m>>>16,u[n]=m<<8|m>>>24,l[n]=m,m=16843009*g^65537*y^257*v^16843008*n,c[p]=m<<24|m>>>8,h[p]=m<<16|m>>>16,f[p]=m<<8|m>>>24,d[p]=m,n?(n=v^t[t[t[g^v]]],i^=t[t[i]]):n=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,i=4*((this._nRounds=n+6)+1),s=this._keySchedule=[],o=0;o<i;o++)if(o<n)s[o]=e[o];else{var a=s[o-1];o%n?n>6&&o%n==4&&(a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a]):(a=r[(a=a<<8|a>>>24)>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a],a^=p[o/n|0]<<24),s[o]=s[o-n]^a}for(var u=this._invKeySchedule=[],l=0;l<i;l++)o=i-l,a=l%4?s[o]:s[o-4],u[l]=l<4||o<=4?a:c[r[a>>>24]]^h[r[a>>>16&255]]^f[r[a>>>8&255]]^d[r[255&a]]}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,o,a,u,l,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,c,h,f,d,s),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,i,r,s,o,a){for(var u=this._nRounds,l=t[e]^n[0],c=t[e+1]^n[1],h=t[e+2]^n[2],f=t[e+3]^n[3],d=4,p=1;p<u;p++){var v=i[l>>>24]^r[c>>>16&255]^s[h>>>8&255]^o[255&f]^n[d++],y=i[c>>>24]^r[h>>>16&255]^s[f>>>8&255]^o[255&l]^n[d++],g=i[h>>>24]^r[f>>>16&255]^s[l>>>8&255]^o[255&c]^n[d++],m=i[f>>>24]^r[l>>>16&255]^s[c>>>8&255]^o[255&h]^n[d++];l=v,c=y,h=g,f=m}v=(a[l>>>24]<<24|a[c>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d++],y=(a[c>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^n[d++],g=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&c])^n[d++],m=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[c>>>8&255]<<8|a[255&h])^n[d++],t[e]=v,t[e+1]=y,t[e+2]=g,t[e+3]=m},keySize:8});t.AES=e._createHelper(v)}(),n.AES)})),z((function(t,e){t.exports=function(){var t="millisecond",e="second",n="minute",i="hour",r="day",s="week",o="month",a="quarter",u="year",l="date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},d=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},p={s:d,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+d(i,2,"0")+":"+d(r,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),r=e.clone().add(i,o),s=n-r<0,a=e.clone().add(i+(s?-1:1),o);return+(-(i+(n-r)/(s?r-a:a-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return{M:o,y:u,w:s,d:r,D:l,h:i,m:n,s:e,ms:t,Q:a}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",y={};y[v]=f;var g=function(t){return t instanceof x},m=function(t,e,n){var i;if(!t)return v;if("string"==typeof t)y[t]&&(i=t),e&&(y[t]=e,i=t);else{var r=t.name;y[r]=t,i=r}return!n&&i&&(v=i),i||!n&&v},_=function(t,e){if(g(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new x(n)},b=p;b.l=m,b.i=g,b.w=function(t,e){return _(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var x=function(){function f(t){this.$L=this.$L||m(t.locale,null,!0),this.parse(t)}var d=f.prototype;return d.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(c);if(i){var r=i[2]-1||0,s=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return b},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(t,e){var n=_(t);return this.startOf(e)<=n&&n<=this.endOf(e)},d.isAfter=function(t,e){return _(t)<this.startOf(e)},d.isBefore=function(t,e){return this.endOf(e)<_(t)},d.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,a){var c=this,h=!!b.u(a)||a,f=b.p(t),d=function(t,e){var n=b.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return h?n:n.endOf(r)},p=function(t,e){return b.w(c.toDate()[t].apply(c.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},v=this.$W,y=this.$M,g=this.$D,m="set"+(this.$u?"UTC":"");switch(f){case u:return h?d(1,0):d(31,11);case o:return h?d(1,y):d(0,y+1);case s:var _=this.$locale().weekStart||0,x=(v<_?v+7:v)-_;return d(h?g-x:g+(6-x),y);case r:case l:return p(m+"Hours",0);case i:return p(m+"Minutes",1);case n:return p(m+"Seconds",2);case e:return p(m+"Milliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(s,a){var c,h=b.p(s),f="set"+(this.$u?"UTC":""),d=(c={},c[r]=f+"Date",c[l]=f+"Date",c[o]=f+"Month",c[u]=f+"FullYear",c[i]=f+"Hours",c[n]=f+"Minutes",c[e]=f+"Seconds",c[t]=f+"Milliseconds",c)[h],p=h===r?this.$D+(a-this.$W):a;if(h===o||h===u){var v=this.clone().set(l,1);v.$d[d](p),v.init(),this.$d=v.set(l,Math.min(this.$D,v.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},d.set=function(t,e){return this.clone().$set(t,e)},d.get=function(t){return this[b.p(t)]()},d.add=function(t,a){var l,c=this;t=Number(t);var h=b.p(a),f=function(e){var n=_(c);return b.w(n.date(n.date()+Math.round(e*t)),c)};if(h===o)return this.set(o,this.$M+t);if(h===u)return this.set(u,this.$y+t);if(h===r)return f(1);if(h===s)return f(7);var d=(l={},l[n]=6e4,l[i]=36e5,l[e]=1e3,l)[h]||1,p=this.$d.getTime()+t*d;return b.w(p,this)},d.subtract=function(t,e){return this.add(-1*t,e)},d.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=b.z(this),r=this.$locale(),s=this.$H,o=this.$m,a=this.$M,u=r.weekdays,l=r.months,c=function(t,i,r,s){return t&&(t[i]||t(e,n))||r[i].substr(0,s)},f=function(t){return b.s(s%12||12,t,"0")},d=r.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:b.s(a+1,2,"0"),MMM:c(r.monthsShort,a,l,3),MMMM:c(l,a),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:c(r.weekdaysMin,this.$W,u,2),ddd:c(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(s),HH:b.s(s,2,"0"),h:f(1),hh:f(2),a:d(s,o,!0),A:d(s,o,!1),m:String(o),mm:b.s(o,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:i};return n.replace(h,(function(t,e){return e||p[t]||i.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,l,c){var h,f=b.p(l),d=_(t),p=6e4*(d.utcOffset()-this.utcOffset()),v=this-d,y=b.m(this,d);return y=(h={},h[u]=y/12,h[o]=y,h[a]=y/3,h[s]=(v-p)/6048e5,h[r]=(v-p)/864e5,h[i]=v/36e5,h[n]=v/6e4,h[e]=v/1e3,h)[f]||v,c?y:b.a(y)},d.daysInMonth=function(){return this.endOf(o).$D},d.$locale=function(){return y[this.$L]},d.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=m(t,e,!0);return i&&(n.$L=i),n},d.clone=function(){return b.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},f}(),w=x.prototype;return _.prototype=w,[["$ms",t],["$s",e],["$m",n],["$H",i],["$W",r],["$M",o],["$y",u],["$D",l]].forEach((function(t){w[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),_.extend=function(t,e){return t(e,x,_),_},_.locale=m,_.isDayjs=g,_.unix=function(t){return _(1e3*t)},_.en=y[v],_.Ls=y,_}()})),z((function(t,e){t.exports=function(t,e,n){var i=e.prototype;n.utc=function(t){return new e({date:t,utc:!0,args:arguments})},i.utc=function(t){var e=n(this.toDate(),{locale:this.$L,utc:!0});return t?e.add(this.utcOffset(),"minute"):e},i.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var r=i.parse;i.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),r.call(this,t)};var s=i.init;i.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else s.call(this)};var o=i.utcOffset;i.utcOffset=function(t,e){var n=this.$utils().u;if(n(t))return this.$u?0:n(this.$offset)?o.call(this):this.$offset;var i=Math.abs(t)<=16?60*t:t,r=this;if(e)return r.$offset=i,r.$u=0===t,r;if(0!==t){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(r=this.local().add(i+s,"minute")).$offset=i,r.$x.$localOffset=s}else r=this.utc();return r};var a=i.format;i.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return a.call(this,e)},i.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*t},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var u=i.toDate;i.toDate=function(t){return"s"===t&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var l=i.diff;i.diff=function(t,e,i){var r=this.local(),s=n(t).local();return l.call(r,s,e,i)}}})),z((function(t,e){function n(t,e){void 0===e&&(e="*"),this.wchar=e,this.pattern=t,this.segments=[],this.starCount=0,this.minLength=0,this.maxLength=0,this.segStartIndex=0;for(var n=0,i=t.length;n<i;n+=1){var r=t[n];r===e&&(this.starCount+=1,n>this.segStartIndex&&this.segments.push(t.substring(this.segStartIndex,n)),this.segments.push(r),this.segStartIndex=n+1)}this.segStartIndex<t.length&&this.segments.push(t.substring(this.segStartIndex)),this.starCount?(this.minLength=t.length-this.starCount,this.maxLength=1/0):this.maxLength=this.minLength=t.length}e.__esModule=!0,n.prototype.match=function(t){if(this.pattern===this.wchar)return!0;if(0===this.segments.length)return this.pattern===t;var e=t.length;if(e<this.minLength||e>this.maxLength)return!1;for(var n=this.segments.length-1,i=t.length-1,r=!1;;){var s=this.segments[n];if(n-=1,s===this.wchar)r=!0;else{var o=i+1-s.length,a=t.lastIndexOf(s,o);if(-1===a||a>o)return!1;if(r)i=a-1,r=!1;else{if(a!==o)return!1;i-=s.length}}if(0>n)break}return!0},e.default=n}))),F=z((function(t,e){var n=V&&V.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};function i(t,e,n,i){void 0===i&&(i=void 0),this.obj=t,this.delimeter=e,this.wildcard=n,this.is_match=i}e.__esModule=!0,i.prototype.simpleMatch=function(t,e){if(t===e)return!0;if(t===this.wildcard)return!0;if(this.is_match)return this.is_match(t,e);var n=t.indexOf(this.wildcard);if(n>-1){var i=t.substr(n+1);if(0===n||e.substring(0,n)===t.substring(0,n)){var r=i.length;return!(r>0)||e.substr(-r)===i}}return!1},i.prototype.match=function(t,e){return this.is_match?this.is_match(t,e):t===e||t===this.wildcard||e===this.wildcard||this.simpleMatch(t,e)||new W.default(t).match(e)},i.prototype.handleArray=function(t,e,i,r,s){var o,a;void 0===s&&(s={});var u=t.indexOf(this.delimeter,i),l=!1;-1===u&&(l=!0,u=t.length);var c=t.substring(i,u),h=0;try{for(var f=n(e),d=f.next();!d.done;d=f.next()){var p=d.value,v=h.toString(),y=""===r?v:r+this.delimeter+h;(c===this.wildcard||c===v||this.simpleMatch(c,v))&&(l?s[y]=p:this.goFurther(t,p,u+1,y,s)),h++}}catch(t){o={error:t}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}return s},i.prototype.handleObject=function(t,e,n,i,r){void 0===r&&(r={});var s=t.indexOf(this.delimeter,n),o=!1;-1===s&&(o=!0,s=t.length);var a=t.substring(n,s);for(var u in e){u=u.toString();var l=""===i?u:i+this.delimeter+u;(a===this.wildcard||a===u||this.simpleMatch(a,u))&&(o?r[l]=e[u]:this.goFurther(t,e[u],s+1,l,r))}return r},i.prototype.goFurther=function(t,e,n,i,r){return void 0===r&&(r={}),Array.isArray(e)?this.handleArray(t,e,n,i,r):this.handleObject(t,e,n,i,r)},i.prototype.get=function(t){return this.goFurther(t,this.obj,0,"")},e.default=i})),U=z((function(t,e){var n=V&&V.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};e.__esModule=!0;var i=function(){function t(){}return t.get=function(t,e,i){var r,s;if(void 0===i&&(i=!1),e){var o=e;try{for(var a=n(t),u=a.next();!u.done;u=a.next()){var l=u.value;if(o.hasOwnProperty(l))o=o[l];else{if(!i)return;o[l]={},o=o[l]}}}catch(t){r={error:t}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}return o}},t.set=function(e,n,i){if(i){if(0!==e.length){var r=e.slice(),s=r.pop(),o=t.get(r,i,!0);return"object"==typeof o&&(o[s]=n),n}for(var a in n)i[a]=n[a]}},t}();e.default=i}));let Q,Y=0,q=null;function K(){return null!==q&&q.buffer===Q.memory.buffer||(q=new Uint8Array(Q.memory.buffer)),q}let G=new TextEncoder("utf-8");const J="function"==typeof G.encodeInto?function(t,e){return G.encodeInto(t,e)}:function(t,e){const n=G.encode(t);return e.set(n),{read:t.length,written:n.length}};function X(t,e,n){if(void 0===n){const n=G.encode(t),i=e(n.length);return K().subarray(i,i+n.length).set(n),Y=n.length,i}let i=t.length,r=e(i);const s=K();let o=0;for(;o<i;o++){const e=t.charCodeAt(o);if(e>127)break;s[r+o]=e}if(o!==i){0!==o&&(t=t.slice(o)),r=n(r,i,i=o+3*t.length);const e=K().subarray(r+o,r+i);o+=J(t,e).written}return Y=o,r}var Z=H(Object.freeze({__proto__:null,is_match:function(t,e){var n=X(t,Q.__wbindgen_malloc,Q.__wbindgen_realloc),i=Y,r=X(e,Q.__wbindgen_malloc,Q.__wbindgen_realloc),s=Y;return 0!==Q.is_match(n,i,r,s)},default:async function t(e){("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:i}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await e,{});return Q=n.exports,t.__wbindgen_wasm_module=i,Q}}));z((function(t,e){var n=V&&V.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},i=V&&V.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){t.done?r(t.value):new n((function(e){e(t.value)})).then(o,a)}u((i=i.apply(t,e||[])).next())}))},r=V&&V.__generator||function(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=V&&V.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},o=V&&V.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},a=V&&V.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};function u(t,e){console.debug(t,e)}e.__esModule=!0;var l={bulk:!1,debug:!1,source:"",data:void 0,queue:!1},c={only:[],source:"",debug:!1,data:void 0,queue:!1,force:!1},h=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.jobsRunning=0,this.updateQueue=[],this.subscribeQueue=[],this.listenersIgnoreCache=new WeakMap,this.destroyed=!1,this.queueRuns=0,this.lastExecs=new WeakMap,this.listeners=new Map,this.waitingListeners=new Map,this.data=t,this.options=n({},{delimiter:".",debug:!1,extraDebug:!1,useMute:!0,notRecursive:";",param:":",wildcard:"*",experimentalMatch:!1,queue:!1,maxSimultaneousJobs:1e3,maxQueueRuns:1e3,log:u,Promise:Promise},e),this.id=0,this.pathGet=U.default.get,this.pathSet=U.default.set,e.Promise?this.resolved=e.Promise.resolve():this.resolved=Promise.resolve(),this.muted=new Set,this.mutedListeners=new Set,this.scan=new F.default(this.data,this.options.delimiter,this.options.wildcard),this.destroyed=!1}return t.prototype.loadWasmMatcher=function(t){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,Z.default(t)];case 1:return e.sent(),this.is_match=Z.is_match,this.scan=new F.default(this.data,this.options.delimiter,this.options.wildcard,this.is_match),[2]}}))}))},t.prototype.same=function(t,e){return(["number","string","undefined","boolean"].includes(typeof t)||null===t)&&e===t},t.prototype.getListeners=function(){return this.listeners},t.prototype.destroy=function(){this.destroyed=!0,this.data=void 0,this.listeners=new Map,this.updateQueue=[],this.jobsRunning=0},t.prototype.match=function(t,e,n){return void 0===n&&(n=!0),this.is_match?this.is_match(t,e):t===e||(t===this.options.wildcard||e===this.options.wildcard||!(!n&&this.getIndicesCount(this.options.delimiter,t)<this.getIndicesCount(this.options.delimiter,e))&&this.scan.match(t,e))},t.prototype.getIndicesOf=function(t,e){var n=t.length;if(0==n)return[];for(var i,r=0,s=[];(i=e.indexOf(t,r))>-1;)s.push(i),r=i+n;return s},t.prototype.getIndicesCount=function(t,e){var n=t.length;if(0==n)return 0;for(var i,r=0,s=0;(i=e.indexOf(t,r))>-1;)s++,r=i+n;return s},t.prototype.cutPath=function(t,e){if((t=this.cleanNotRecursivePath(t))===(e=this.cleanNotRecursivePath(e)))return t;var n=this.getIndicesCount(this.options.delimiter,e),i=this.getIndicesOf(this.options.delimiter,t);return t.substr(0,i[n])},t.prototype.trimPath=function(t){return(t=this.cleanNotRecursivePath(t)).charAt(0)===this.options.delimiter?t.substr(1):t},t.prototype.split=function(t){return""===t?[]:t.split(this.options.delimiter)},t.prototype.isWildcard=function(t){return t.includes(this.options.wildcard)||this.hasParams(t)},t.prototype.isNotRecursive=function(t){return t.endsWith(this.options.notRecursive)},t.prototype.cleanNotRecursivePath=function(t){return this.isNotRecursive(t)?t.substring(0,t.length-1):t},t.prototype.hasParams=function(t){return t.includes(this.options.param)},t.prototype.getParamsInfo=function(t){var e,n,i={replaced:"",original:t,params:{}},r=0,o=[];try{for(var a=s(this.split(t)),u=a.next();!u.done;u=a.next()){var l=u.value;i.params[r]={original:l,replaced:"",name:""};var c=new RegExp("\\"+this.options.param+"([^\\"+this.options.delimiter+"\\"+this.options.param+"]+)","g"),h=c.exec(l);h?(i.params[r].name=h[1],c.lastIndex=0,i.params[r].replaced=l.replace(c,this.options.wildcard),o.push(i.params[r].replaced),r++):(delete i.params[r],o.push(l),r++)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i.replaced=o.join(this.options.delimiter),i},t.prototype.getParams=function(t,e){if(t){var n=this.split(e),i={};for(var r in t.params){i[t.params[r].name]=n[r]}return i}},t.prototype.waitForAll=function(t,e){var n,i,r={};try{for(var o=s(t),a=o.next();!a.done;a=o.next()){var u=a.value;r[u]={dirty:!1},this.hasParams(u)&&(r[u].paramsInfo=this.getParamsInfo(u)),r[u].isWildcard=this.isWildcard(u),r[u].isRecursive=!this.isNotRecursive(u)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return this.waitingListeners.set(t,{fn:e,paths:r}),e(r),function(){this.waitingListeners.delete(t)}},t.prototype.executeWaitingListeners=function(t){var e,n;if(!this.destroyed)try{for(var i=s(this.waitingListeners.values()),r=i.next();!r.done;r=i.next()){var o=r.value,a=o.fn,u=o.paths,l=0,c=0;for(var h in u){var f=u[h],d=!1;f.isRecursive&&(t=this.cutPath(t,h)),f.isWildcard&&this.match(h,t)&&(d=!0),t===h&&(d=!0),d&&(f.dirty=!0),f.dirty&&l++,c++}l===c&&a(u)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.subscribeAll=function(t,e,n){var i,r;if(void 0===n&&(n=l),this.destroyed)return function(){};var o=[];try{for(var a=s(t),u=a.next();!u.done;u=a.next()){var c=u.value;o.push(this.subscribe(c,e,n))}}catch(t){i={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return function(){var t,e;try{for(var n=s(o),i=n.next();!i.done;i=n.next()){(0,i.value)()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}}},t.prototype.getCleanListenersCollection=function(t){return void 0===t&&(t={}),n({listeners:new Map,isRecursive:!1,isWildcard:!1,hasParams:!1,match:void 0,paramsInfo:void 0,path:void 0,originalPath:void 0,count:0},t)},t.prototype.getCleanListener=function(t,e){return void 0===e&&(e=l),{fn:t,options:n({},l,e)}},t.prototype.getListenerCollectionMatch=function(t,e,n){t=this.cleanNotRecursivePath(t);var i=this;return function(r,s){void 0===s&&(s=!1);var o=t;return e?r=i.cutPath(r,t):o=i.cutPath(i.cleanNotRecursivePath(t),r),s&&console.log("[getListenerCollectionMatch]",{listenerPath:t,scopedListenerPath:o,path:r,isRecursive:e,isWildcard:n}),!(!n||!i.match(o,r,e))||o===r}},t.prototype.getListenersCollection=function(t,e){if(this.listeners.has(t)){var i=this.listeners.get(t);return i.listeners.set(++this.id,e),e.id=this.id,i}var r,s=this.hasParams(t);s&&(r=this.getParamsInfo(t));var o={isRecursive:!this.isNotRecursive(t),isWildcard:this.isWildcard(t),hasParams:s,paramsInfo:r,originalPath:t,path:s?r.replaced:t};o.isRecursive||(o.path=this.cleanNotRecursivePath(o.path));var a=this.getCleanListenersCollection(n({},o,{match:this.getListenerCollectionMatch(o.path,o.isRecursive,o.isWildcard)}));return this.id++,a.listeners.set(this.id,e),e.id=this.id,this.listeners.set(o.originalPath,a),a},t.prototype.subscribe=function(t,e,n,i){if(void 0===n&&(n=l),void 0===i&&(i="subscribe"),this.destroyed)return function(){};this.jobsRunning++;var r=this.getCleanListener(e,n);this.listenersIgnoreCache.set(r,{truthy:[],falsy:[]});var s=this.getListenersCollection(t,r);n.debug&&console.log(),s.count++;var o=this.cleanNotRecursivePath(s.path);if(s.isWildcard){var a=this.scan.get(o);if(n.bulk){var u=[];for(var c in a)this.isMuted(c)||u.push({path:c,params:this.getParams(s.paramsInfo,c),value:a[c]});this.isMuted(e)||e(u,{type:i,listener:r,listenersCollection:s,path:{listener:t,update:void 0,resolved:void 0},options:n,params:void 0})}else for(var c in a)this.isMuted(c)||this.isMuted(e)||e(a[c],{type:i,listener:r,listenersCollection:s,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(c)},params:this.getParams(s.paramsInfo,c),options:n})}else this.isMuted(o)||this.isMuted(e)||e(this.pathGet(this.split(o),this.data),{type:i,listener:r,listenersCollection:s,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(t)},params:this.getParams(s.paramsInfo,o),options:n});return this.debugSubscribe(r,s,t),this.jobsRunning--,this.unsubscribe(t,this.id)},t.prototype.unsubscribe=function(t,e){var n=this.listeners,i=n.get(t);return function(){i.listeners.delete(e),i.count--,0===i.count&&n.delete(t)}},t.prototype.runQueuedListeners=function(){var t=this;if(!this.destroyed&&0!==this.subscribeQueue.length)if(0===this.jobsRunning){this.queueRuns=0;for(var e=a(this.subscribeQueue),n=0,i=e.length;n<i;n++)e[n]();this.subscribeQueue.length=0}else{if(this.queueRuns++,this.queueRuns>=this.options.maxQueueRuns)throw this.queueRuns=0,new Error("Maximal number of queue runs exhausted.");Promise.resolve().then((function(){return t.runQueuedListeners()})).catch((function(t){throw t}))}},t.prototype.getQueueNotifyListeners=function(t,e){var i,r,o,a,u=this;for(var l in void 0===e&&(e=[]),t)if(!this.isMuted(l)){var c=t[l],h=c.single,f=c.bulk,d=function(t){var n,i,r=!1;try{for(var o=(n=void 0,s(e)),a=o.next();!a.done;a=o.next()){if(a.value.id===t.listener.id){r=!0;break}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}if(r)return"continue";var u=p.debugTime(t);p.isMuted(t.listener.fn)||(t.listener.options.queue&&p.jobsRunning?p.subscribeQueue.push((function(){t.listener.fn(t.value(),t.eventInfo)})):e.push({id:t.listener.id,originalFn:t.listener.fn,fn:function(){t.listener.fn(t.value(),t.eventInfo)}})),p.debugListener(u,t)},p=this;try{for(var v=(i=void 0,s(h)),y=v.next();!y.done;y=v.next()){d(y.value)}}catch(t){i={error:t}}finally{try{y&&!y.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}var g=function(t){var i,r,o,a,l=!1;try{for(var c=(i=void 0,s(e)),h=c.next();!h.done;h=c.next()){if(h.value.id===t.listener.id){l=!0;break}}}catch(t){i={error:t}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}if(l)return"continue";var f=m.debugTime(t),d=[];try{for(var p=(o=void 0,s(t.value)),v=p.next();!v.done;v=p.next()){var y=v.value;d.push(n({},y,{value:y.value()}))}}catch(t){o={error:t}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}m.isMuted(t.listener.fn)||(t.listener.options.queue&&m.jobsRunning?m.subscribeQueue.push((function(){return!u.jobsRunning&&(t.listener.fn(d,t.eventInfo),!0)})):e.push({id:t.listener.id,originalFn:t.listener.fn,fn:function(){t.listener.fn(d,t.eventInfo)}})),m.debugListener(f,t)},m=this;try{for(var _=(o=void 0,s(f)),b=_.next();!b.done;b=_.next()){g(b.value)}}catch(t){o={error:t}}finally{try{b&&!b.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}}return Promise.resolve().then((function(){return u.runQueuedListeners()})),e},t.prototype.shouldIgnore=function(t,e){var n,i;if(!t.options.ignore)return!1;try{for(var r=s(t.options.ignore),o=r.next();!o.done;o=r.next()){var a=o.value;if(e.startsWith(a))return!0;if(this.is_match&&this.is_match(a,e))return!0;var u=this.cutPath(e,a);if(this.match(a,u))return!0}}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return!1},t.prototype.getSubscribedListeners=function(t,e,i,r,a){var u,l,h=this;void 0===r&&(r="update"),void 0===a&&(a=null),i=n({},c,i);var f={},d=function(n,o){var u,l,c,d;if(f[n]={single:[],bulk:[],bulkData:[]},o.match(t)){var v=o.paramsInfo?p.getParams(o.paramsInfo,t):void 0,y=p.cutPath(t,n),g=o.isRecursive||o.isWildcard?function(){return h.get(y)}:function(){return e},m=[{value:g,path:t,params:v}];try{for(var _=(u=void 0,s(o.listeners.values())),b=_.next();!b.done;b=_.next()){var x=b.value;p.shouldIgnore(x,t)?x.options.debug&&console.log("[getSubscribedListeners] Listener was not fired because it was ignored.",{listener:x,listenersCollection:o}):x.options.bulk?f[n].bulk.push({listener:x,listenersCollection:o,eventInfo:{type:r,listener:x,path:{listener:n,update:a||t,resolved:void 0},params:v,options:i},value:m}):f[n].single.push({listener:x,listenersCollection:o,eventInfo:{type:r,listener:x,path:{listener:n,update:a||t,resolved:p.cleanNotRecursivePath(t)},params:v,options:i},value:g})}}catch(t){u={error:t}}finally{try{b&&!b.done&&(l=_.return)&&l.call(_)}finally{if(u)throw u.error}}}else if(p.options.extraDebug){var w=!1;try{for(var S=(c=void 0,s(o.listeners.values())),$=S.next();!$.done;$=S.next()){(x=$.value).options.debug&&(w=!0,console.log("[getSubscribedListeners] Listener was not fired because there was no match.",{listener:x,listenersCollection:o,updatePath:t}))}}catch(t){c={error:t}}finally{try{$&&!$.done&&(d=S.return)&&d.call(S)}finally{if(c)throw c.error}}w&&o.match(t,!0)}},p=this;try{for(var v=s(this.listeners),y=v.next();!y.done;y=v.next()){var g=o(y.value,2);d(g[0],g[1])}}catch(t){u={error:t}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(u)throw u.error}}return f},t.prototype.notifySubscribedListeners=function(t,e,n,i,r){return void 0===i&&(i="update"),void 0===r&&(r=null),this.getQueueNotifyListeners(this.getSubscribedListeners(t,e,n,i,r))},t.prototype.getNestedListeners=function(t,e,n,i,r){var a,u;void 0===i&&(i="update"),void 0===r&&(r=null);var l={},c=function(a,u){var c,f;if(!u.isRecursive)return"continue";l[a]={single:[],bulk:[]};var d=h.cutPath(a,t);if(h.match(d,t)){var p=h.trimPath(a.substr(d.length)),v=new F.default(e,h.options.delimiter,h.options.wildcard).get(p),y=u.paramsInfo?h.getParams(u.paramsInfo,t):void 0,g=[],m={},_=function(e){var c,f,d=function(){return v[e]},p=[t,e].join(h.options.delimiter);try{for(var _=(c=void 0,s(u.listeners)),b=_.next();!b.done;b=_.next()){var x=o(b.value,2),w=x[0],S=x[1],$={type:i,listener:S,listenersCollection:u,path:{listener:a,update:r||t,resolved:h.cleanNotRecursivePath(p)},params:y,options:n};h.shouldIgnore(S,t)||(S.options.bulk?(g.push({value:d,path:p,params:y}),m[w]=S):l[a].single.push({listener:S,listenersCollection:u,eventInfo:$,value:d}))}}catch(t){c={error:t}}finally{try{b&&!b.done&&(f=_.return)&&f.call(_)}finally{if(c)throw c.error}}};for(var b in v)_(b);for(var x in m){var w=m[x],S={type:i,listener:w,listenersCollection:u,path:{listener:a,update:t,resolved:void 0},options:n,params:y};l[a].bulk.push({listener:w,listenersCollection:u,eventInfo:S,value:g})}}else if(h.options.extraDebug)try{for(var $=(c=void 0,s(u.listeners.values())),M=$.next();!M.done;M=$.next()){(w=M.value).options.debug&&console.log("[getNestedListeners] Listener was not fired because there was no match.",{listener:w,listenersCollection:u,currentCutPath:d,updatePath:t})}}catch(t){c={error:t}}finally{try{M&&!M.done&&(f=$.return)&&f.call($)}finally{if(c)throw c.error}}},h=this;try{for(var f=s(this.listeners),d=f.next();!d.done;d=f.next()){var p=o(d.value,2);c(p[0],p[1])}}catch(t){a={error:t}}finally{try{d&&!d.done&&(u=f.return)&&u.call(f)}finally{if(a)throw a.error}}return l},t.prototype.notifyNestedListeners=function(t,e,n,i,r,s){return void 0===i&&(i="update"),void 0===s&&(s=null),this.getQueueNotifyListeners(this.getNestedListeners(t,e,n,i,s),r)},t.prototype.getNotifyOnlyListeners=function(t,e,n,i,r){var a,u;void 0===i&&(i="update"),void 0===r&&(r=null);var l={};if("object"!=typeof n.only||!Array.isArray(n.only)||void 0===n.only[0]||!this.canBeNested(e))return l;var c=function(a){var u=new F.default(e,h.options.delimiter,h.options.wildcard).get(a);l[a]={bulk:[],single:[]};var c=function(e){var c,f,d,p,v=t+h.options.delimiter+e;try{for(var y=(c=void 0,s(h.listeners)),g=y.next();!g.done;g=y.next()){var m=o(g.value,2),_=m[0],b=m[1],x=b.paramsInfo?h.getParams(b.paramsInfo,v):void 0;if(h.match(_,v)){var w=function(){return u[e]},S=[{value:w,path:v,params:x}],$=function(e){var s={type:i,listener:e,listenersCollection:b,path:{listener:_,update:r||t,resolved:h.cleanNotRecursivePath(v)},params:x,options:n};if(h.shouldIgnore(e,t))return"continue";e.options.bulk?l[a].bulk.some((function(t){return t.listener===e}))||l[a].bulk.push({listener:e,listenersCollection:b,eventInfo:s,value:S}):l[a].single.push({listener:e,listenersCollection:b,eventInfo:s,value:w})};try{for(var M=(d=void 0,s(b.listeners.values())),N=M.next();!N.done;N=M.next()){$(N.value)}}catch(t){d={error:t}}finally{try{N&&!N.done&&(p=M.return)&&p.call(M)}finally{if(d)throw d.error}}}}}catch(t){c={error:t}}finally{try{g&&!g.done&&(f=y.return)&&f.call(y)}finally{if(c)throw c.error}}};for(var f in u)c(f)},h=this;try{for(var f=s(n.only),d=f.next();!d.done;d=f.next()){c(d.value)}}catch(t){a={error:t}}finally{try{d&&!d.done&&(u=f.return)&&u.call(f)}finally{if(a)throw a.error}}return l},t.prototype.sortAndRunQueue=function(t,e){var n,i;t.sort((function(t,e){return t.id-e.id})),this.options.debug&&console.log("[deep-state-observer] queue for "+e,t);try{for(var r=s(t),o=r.next();!o.done;o=r.next()){o.value.fn()}}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.notifyOnly=function(t,e,n,i,r){void 0===i&&(i="update"),void 0===r&&(r="");var s=this.getQueueNotifyListeners(this.getNotifyOnlyListeners(t,e,n,i,r));this.sortAndRunQueue(s,t)},t.prototype.canBeNested=function(t){return"object"==typeof t&&null!==t},t.prototype.getUpdateValues=function(t,e,n){var i=n;return"function"==typeof n&&(i=n(this.pathGet(e,this.data))),{newValue:i,oldValue:t}},t.prototype.wildcardNotify=function(t,e){var n,i,r,o,a=[];try{for(var u=s(t),l=u.next();!l.done;l=u.next()){var c=l.value;this.getQueueNotifyListeners(c,a)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}try{for(var h=s(e),f=h.next();!f.done;f=h.next()){var d=f.value;this.executeWaitingListeners(d)}}catch(t){r={error:t}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}return this.jobsRunning--,a},t.prototype.wildcardUpdate=function(t,e,i,r){void 0===i&&(i=c),void 0===r&&(r=!1),++this.jobsRunning,i=n({},c,i);var s=this.scan.get(t),o={};for(var a in s){var u=this.split(a),l=this.getUpdateValues(s[a],u,e),h=l.oldValue,f=l.newValue;this.same(f,h)&&!i.force||(this.pathSet(u,f,this.data),o[a]=f)}var d=[],p=[];for(var a in o){f=o[a];i.only.length?d.push(this.getNotifyOnlyListeners(a,f,i,"update",t)):(d.push(this.getSubscribedListeners(a,f,i,"update",t)),this.canBeNested(f)&&d.push(this.getNestedListeners(a,f,i,"update",t))),i.debug&&this.options.log("Wildcard update",{path:a,newValue:f}),p.push(a)}if(r){var v=this;return function(){var e=v.wildcardNotify(d,p);v.sortAndRunQueue(e,t)}}var y=this.wildcardNotify(d,p);this.sortAndRunQueue(y,t)},t.prototype.runUpdateQueue=function(){if(!this.destroyed)for(;this.updateQueue.length&&this.updateQueue.length<this.options.maxSimultaneousJobs;){var t=this.updateQueue.shift();t.options.queue=!1,this.update(t.updatePath,t.fnOrValue,t.options,t.multi)}},t.prototype.updateNotify=function(t,e,n){var i=this.notifySubscribedListeners(t,e,n);this.canBeNested(e)&&this.notifyNestedListeners(t,e,n,"update",i),this.sortAndRunQueue(i,t),this.executeWaitingListeners(t)},t.prototype.updateNotifyOnly=function(t,e,n){this.notifyOnly(t,e,n),this.executeWaitingListeners(t)},t.prototype.update=function(t,e,i,r){var s=this;if(void 0===i&&(i=n({},c)),void 0===r&&(r=!1),!this.destroyed){var o=this.jobsRunning;if((this.options.queue||i.queue)&&o){if(o>this.options.maxSimultaneousJobs)throw new Error("Maximal simultaneous jobs limit reached.");this.updateQueue.push({updatePath:t,fnOrValue:e,options:i,multi:r});var a=Promise.resolve().then((function(){s.runUpdateQueue()}));return r?function(){return a}:a}if(this.isWildcard(t))return this.wildcardUpdate(t,e,i,r);++this.jobsRunning;var u=this.split(t),l=this.getUpdateValues(this.pathGet(u,this.data),u,e),h=l.oldValue,f=l.newValue;if(i.debug&&this.options.log("Updating "+t+" "+(i.source?"from "+i.source:""),{oldValue:h,newValue:f}),this.same(f,h)&&!i.force)return--this.jobsRunning,r?function(){return f}:f;if(this.pathSet(u,f,this.data),null===(i=n({},c,i)).only)return--this.jobsRunning,r?function(){}:f;if(i.only.length){if(--this.jobsRunning,r){var d=this;return function(){return d.updateNotifyOnly(t,f,i)}}return this.updateNotifyOnly(t,f,i),f}if(r){--this.jobsRunning;var p=this;return function(){return p.updateNotify(t,f,i)}}return this.updateNotify(t,f,i),--this.jobsRunning,f}},t.prototype.multi=function(){if(this.destroyed)return{update:function(){},done:function(){}};var t=this,e=[];return{update:function(n,i,r){return void 0===r&&(r=c),e.push(t.update(n,i,r,!0)),this},done:function(){for(var t=0,n=e.length;t<n;t++)e[t]();e.length=0}}},t.prototype.get=function(t){if(void 0===t&&(t=void 0),!this.destroyed)return void 0===t||""===t?this.data:this.pathGet(this.split(t),this.data)},t.prototype.last=function(t){var e=this,n=this.lastExecs.get(t);n||(n={calls:0},this.lastExecs.set(t,n));var i=++n.calls;this.resolved.then((function(){i===n.calls&&(e.lastExecs.set(t,{calls:0}),t())}))},t.prototype.isMuted=function(t){var e,n;if(!this.options.useMute)return!1;if("function"==typeof t)return this.isMutedListener(t);try{for(var i=s(this.muted),r=i.next();!r.done;r=i.next()){var o=r.value,a=!this.isNotRecursive(o),u=this.trimPath(o);if(this.match(t,u))return!0;if(this.match(u,t))return!0;if(a){var l=this.cutPath(u,t);if(this.match(l,o))return!0;if(this.match(o,l))return!0}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return!1},t.prototype.isMutedListener=function(t){return this.mutedListeners.has(t)},t.prototype.mute=function(t){if("function"==typeof t)return this.mutedListeners.add(t);this.muted.add(t)},t.prototype.unmute=function(t){if("function"==typeof t)return this.mutedListeners.delete(t);this.muted.delete(t)},t.prototype.debugSubscribe=function(t,e,n){t.options.debug&&this.options.log("listener subscribed",{listenerPath:n,listener:t,listenersCollection:e})},t.prototype.debugListener=function(t,e){(e.eventInfo.options.debug||e.listener.options.debug)&&this.options.log("Listener fired",{time:Date.now()-t,info:e})},t.prototype.debugTime=function(t){return t.listener.options.debug||t.eventInfo.options.debug?Date.now():0},t}();e.default=h}));const tt="gstc";function et(t,e=""){let n="gstc__"+t;return t===tt&&(n=tt),e?`${n} ${n}--${e.replace(":","-")}`:n}const nt="config.plugin.TimeBookmarks",it="config.slots.chart.content";class rt{constructor(t,e){this.unsub=[],this.options=function(t){return Object.assign({enabled:!0,className:et("chart-time-bookmark")},t)}(t),this.vido=e,this.state=e.state,this.className=this.options.className,this.slotComponent=this.slotComponent.bind(this),this.state.update(nt,this.options),this.state.update(it,t=>(t.includes(this.slotComponent)||t.push(this.slotComponent),t)),this.unsub.push(this.state.subscribe(nt,t=>this.options=t))}destroy(){this.unsub.forEach(t=>t()),this.state.update(it,t=>t.filter(t=>t!==this.slotComponent)),this.vido.api.pluginDestroyed("TimeBookmarks")}slotComponent(t){const{html:e,onDestroy:n,state:i,update:r,api:s}=t,o="#3498DB",a=[];n(i.subscribeAll([nt,"config.chart.time","config.scroll.horizontal.dataIndex"],()=>{const t=i.get(nt);a.length=0;for(const e in t.bookmarks){const n=Object.assign(Object.assign({},t.bookmarks[e]),{id:e,leftViewPx:0});n.id=e,n.leftViewPx=s.time.getViewOffsetPxFromDates(s.time.date(n.time)),a.push(n)}r()}));let u=0;n(i.subscribe("config.headerHeight",t=>{u=t,r()}));let l=0;n(i.subscribe("config.innerHeight",t=>{l=t,r()}));let c=0;n(i.subscribe("config.scroll.horizontal.size",t=>{c=t,r()}));const h=t=>e`<div
        class="${this.className} ${this.className}--${t.id}"
        style="left:${t.leftViewPx}px;top: ${u-8}px;"
      >
        <div class="${this.className}-handle" style="background: ${t.color||o};">
          ${t.label}
        </div>
        <div class="${this.className}-line" style="border-left: 1px solid ${t.color||o};"></div>
      </div>`;return t=>e`${t}
        <div class="${this.className}s" style="height: ${l+u-c}px;">
          ${a.map(t=>h(t))}
        </div>`}}t.Plugin=function(t={}){return function(e){const n=e.state.get(nt);n&&(t=e.api.mergeDeep({},t,n));const i=new rt(t,e);return e.api.pluginInitialized("TimeBookmarks"),i.destroy}},t.pluginPath=nt,t.slotPath=it,Object.defineProperty(t,"__esModule",{value:!0})}));
