"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}t((function(t,e){t.exports=function(){var t=1e3,e=6e4,i=36e5,s="millisecond",n="second",o="minute",r="hour",a="day",l="week",h="month",p="quarter",u="year",c="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,i){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(i)+t},y={s:m,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),s=Math.floor(i/60),n=i%60;return(e<=0?"+":"-")+m(s,2,"0")+":"+m(n,2,"0")},m:function t(e,i){if(e.date()<i.date())return-t(i,e);var s=12*(i.year()-e.year())+(i.month()-e.month()),n=e.clone().add(s,h),o=i-n<0,r=e.clone().add(s+(o?-1:1),h);return+(-(s+(i-n)/(o?n-r:r-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:h,y:u,w:l,d:a,D:c,h:r,m:o,s:n,ms:s,Q:p}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},$="en",w={};w[$]=g;var T=function(t){return t instanceof D},x=function(t,e,i){var s;if(!t)return $;if("string"==typeof t)w[t]&&(s=t),e&&(w[t]=e,s=t);else{var n=t.name;w[n]=t,s=n}return!i&&s&&($=s),s||!i&&$},_=function(t,e){if(T(t))return t.clone();var i="object"==typeof e?e:{};return i.date=t,i.args=arguments,new D(i)},b=y;b.l=x,b.i=T,b.w=function(t,e){return _(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var D=function(){function g(t){this.$L=x(t.locale,null,!0),this.parse(t)}var m=g.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(f);if(s){var n=s[2]-1||0,o=(s[7]||"0").substring(0,3);return i?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,o)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(t,e){var i=_(t);return this.startOf(e)<=i&&i<=this.endOf(e)},m.isAfter=function(t,e){return _(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<_(t)},m.$g=function(t,e,i){return b.u(t)?this[e]:this.set(i,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var i=this,s=!!b.u(e)||e,p=b.p(t),d=function(t,e){var n=b.w(i.$u?Date.UTC(i.$y,e,t):new Date(i.$y,e,t),i);return s?n:n.endOf(a)},f=function(t,e){return b.w(i.toDate()[t].apply(i.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(e)),i)},v=this.$W,g=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(p){case u:return s?d(1,0):d(31,11);case h:return s?d(1,g):d(0,g+1);case l:var $=this.$locale().weekStart||0,w=(v<$?v+7:v)-$;return d(s?m-w:m+(6-w),g);case a:case c:return f(y+"Hours",0);case r:return f(y+"Minutes",1);case o:return f(y+"Seconds",2);case n:return f(y+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var i,l=b.p(t),p="set"+(this.$u?"UTC":""),d=(i={},i[a]=p+"Date",i[c]=p+"Date",i[h]=p+"Month",i[u]=p+"FullYear",i[r]=p+"Hours",i[o]=p+"Minutes",i[n]=p+"Seconds",i[s]=p+"Milliseconds",i)[l],f=l===a?this.$D+(e-this.$W):e;if(l===h||l===u){var v=this.clone().set(c,1);v.$d[d](f),v.init(),this.$d=v.set(c,Math.min(this.$D,v.daysInMonth())).$d}else d&&this.$d[d](f);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(s,p){var c,d=this;s=Number(s);var f=b.p(p),v=function(t){var e=_(d);return b.w(e.date(e.date()+Math.round(t*s)),d)};if(f===h)return this.set(h,this.$M+s);if(f===u)return this.set(u,this.$y+s);if(f===a)return v(1);if(f===l)return v(7);var g=(c={},c[o]=e,c[r]=i,c[n]=t,c)[f]||1,m=this.$d.getTime()+s*g;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,i=this.$locale();if(!this.isValid())return i.invalidDate||d;var s=t||"YYYY-MM-DDTHH:mm:ssZ",n=b.z(this),o=this.$H,r=this.$m,a=this.$M,l=i.weekdays,h=i.months,p=function(t,i,n,o){return t&&(t[i]||t(e,s))||n[i].substr(0,o)},u=function(t){return b.s(o%12||12,t,"0")},c=i.meridiem||function(t,e,i){var s=t<12?"AM":"PM";return i?s.toLowerCase():s},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:b.s(a+1,2,"0"),MMM:p(i.monthsShort,a,h,3),MMMM:p(h,a),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:p(i.weekdaysMin,this.$W,l,2),ddd:p(i.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:b.s(o,2,"0"),h:u(1),hh:u(2),a:c(o,r,!0),A:c(o,r,!1),m:String(r),mm:b.s(r,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:n};return s.replace(v,(function(t,e){return e||f[t]||n.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(s,c,d){var f,v=b.p(c),g=_(s),m=(g.utcOffset()-this.utcOffset())*e,y=this-g,$=b.m(this,g);return $=(f={},f[u]=$/12,f[h]=$,f[p]=$/3,f[l]=(y-m)/6048e5,f[a]=(y-m)/864e5,f[r]=y/i,f[o]=y/e,f[n]=y/t,f)[v]||y,d?$:b.a($)},m.daysInMonth=function(){return this.endOf(h).$D},m.$locale=function(){return w[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),s=x(t,e,!0);return s&&(i.$L=s),i},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),S=D.prototype;return _.prototype=S,[["$ms",s],["$s",n],["$m",o],["$H",r],["$W",a],["$M",h],["$y",u],["$D",c]].forEach((function(t){S[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),_.extend=function(t,e){return t.$i||(t(e,D,_),t.$i=!0),_},_.locale=x,_.isDayjs=T,_.unix=function(t){return _(1e3*t)},_.en=w[$],_.Ls=w,_.p={},_}()})),t((function(t,e){t.exports=function(){var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,n,o){var r=n.prototype;o.utc=function(t){return new n({date:t,utc:!0,args:arguments})},r.utc=function(e){var i=o(this.toDate(),{locale:this.$L,utc:!0});return e?i.add(this.utcOffset(),t):i},r.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var a=r.parse;r.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),a.call(this,t)};var l=r.init;r.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else l.call(this)};var h=r.utcOffset;r.utcOffset=function(s,n){var o=this.$utils().u;if(o(s))return this.$u?0:o(this.$offset)?h.call(this):this.$offset;if("string"==typeof s&&null===(s=function(t){void 0===t&&(t="");var s=t.match(e);if(!s)return null;var n=(""+s[0]).match(i)||["-",0,0],o=n[0],r=60*+n[1]+ +n[2];return 0===r?0:"+"===o?r:-r}(s)))return this;var r=Math.abs(s)<=16?60*s:s,a=this;if(n)return a.$offset=r,a.$u=0===s,a;if(0!==s){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(r+l,t)).$offset=r,a.$x.$localOffset=l}else a=this.utc();return a};var p=r.format;r.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,e)},r.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*t},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var u=r.toDate;r.toDate=function(t){return"s"===t&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var c=r.diff;r.diff=function(t,e,i){if(t&&this.$u===t.$u)return c.call(this,t,e,i);var s=this.local(),n=o(t).local();return c.call(s,n,e,i)}}}()}));new class{constructor(){this.GSTCID=this.GSTCID.bind(this),this.isGSTCID=this.isGSTCID.bind(this),this.sourceID=this.sourceID.bind(this)}GSTCID(t){return`gstcid-${t}`}isGSTCID(t){return t.startsWith("gstcid-")}sourceID(t){return this.isGSTCID(t)?t.substr(7):t}};const e=t=>null!=t&&"boolean"==typeof t.isDirective,i="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,s=(t,e,i=null,s=null)=>{for(;e!==i;){const i=e.nextSibling;t.insertBefore(e,s),e=i}},n=(t,e,i=null)=>{for(;e!==i;){const i=e.nextSibling;t.removeChild(e),e=i}},o={},r={},a=`{{lit-${String(Math.random()).slice(2)}}}`,l=`\x3c!--${a}--\x3e`,h=new RegExp(`${a}|${l}`);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class p{constructor(t,e){this.parts=[],this.element=e;const i=[],s=[],n=document.createTreeWalker(e.content,133,null,!1);let o=0,r=-1,l=0;const{strings:p,values:{length:c}}=t;for(;l<c;){const t=n.nextNode();if(null!==t){if(r++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:i}=e;let s=0;for(let t=0;t<i;t++)u(e[t].name,"$lit$")&&s++;for(;s-- >0;){const e=p[l],i=v.exec(e)[2],s=i.toLowerCase()+"$lit$",n=t.getAttribute(s);t.removeAttribute(s);const o=n.split(h);this.parts.push({type:"attribute",index:r,name:i,strings:o}),l+=o.length-1}}"TEMPLATE"===t.tagName&&(s.push(t),n.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(a)>=0){const s=t.parentNode,n=e.split(h),o=n.length-1;for(let e=0;e<o;e++){let i,o=n[e];if(""===o)i=f();else{const t=v.exec(o);null!==t&&u(t[2],"$lit$")&&(o=o.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),i=document.createTextNode(o)}s.insertBefore(i,t),this.parts.push({type:"node",index:++r})}""===n[o]?(s.insertBefore(f(),t),i.push(t)):t.data=n[o],l+=o}}else if(8===t.nodeType)if(t.data===a){const e=t.parentNode;null!==t.previousSibling&&r!==o||(r++,e.insertBefore(f(),t)),o=r,this.parts.push({type:"node",index:r}),null===t.nextSibling?t.data="":(i.push(t),r--),l++}else{let e=-1;for(;-1!==(e=t.data.indexOf(a,e+1));)this.parts.push({type:"node",index:-1}),l++}}else n.currentNode=s.pop()}for(const t of i)t.parentNode.removeChild(t)}}const u=(t,e)=>{const i=t.length-e.length;return i>=0&&t.slice(i)===e},c=t=>-1!==t.index,d=document.createComment(""),f=()=>d.cloneNode(),v=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class g{constructor(t,e,i){this.__parts=[],this.template=t,this.processor=e,this.options=i}update(t){let e=0;for(const i of this.__parts)void 0!==i&&i.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=i?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],s=this.template.parts,n=document.createTreeWalker(t,133,null,!1);let o,r=0,a=0,l=n.nextNode();for(;r<s.length;)if(o=s[r],c(o)){for(;a<o.index;)a++,"TEMPLATE"===l.nodeName&&(e.push(l),n.currentNode=l.content),null===(l=n.nextNode())&&(n.currentNode=e.pop(),l=n.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(l.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options));r++}else this.__parts.push(void 0),r++;return i&&(document.adoptNode(t),customElements.upgrade(t)),t
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */}}const m=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),y=` ${a} `,$=document.createElement("template");class w{constructor(t,e,i,s){this.strings=t,this.values=e,this.type=i,this.processor=s}getHTML(){const t=this.strings.length-1;let e="",i=!1;for(let s=0;s<t;s++){const t=this.strings[s],n=t.lastIndexOf("\x3c!--");i=(n>-1||i)&&-1===t.indexOf("--\x3e",n+1);const o=v.exec(t);e+=null===o?t+(i?y:l):t.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+a}return e+=this.strings[t],e}getTemplateElement(){const t=$.cloneNode();let e=this.getHTML();return void 0!==m&&(e=m.createHTML(e)),t.innerHTML=e,t}}class T extends w{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,i=e.firstChild;return e.removeChild(i),s(e,i.firstChild),t
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */}}const x=t=>null===t||!("object"==typeof t||"function"==typeof t),_=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]),b=document.createTextNode("");class D{constructor(t,e,i){this.dirty=!0,this.element=t,this.name=e,this.strings=i,this.parts=[];for(let t=0;t<i.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new S(this)}_getValue(){const t=this.strings,e=t.length-1,i=this.parts;if(1===e&&""===t[0]&&""===t[1]){const t=i[0].value;if("symbol"==typeof t)return String(t);if("string"==typeof t||!_(t))return t}let s="";for(let n=0;n<e;n++){s+=t[n];const e=i[n];if(void 0!==e){const t=e.value;if(x(t)||!_(t))s+="string"==typeof t?t:String(t);else for(const e of t)s+="string"==typeof e?e:String(e)}}return s+=t[e],s}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class S{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===o||x(t)&&t===this.value||(this.value=t,e(t)||(this.committer.dirty=!0))}commit(){for(;e(this.value);){const t=this.value;this.value=o,t.isClass?t.body(this):t(this)}this.value!==o&&this.committer.commit()}}class M{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(f()),this.endNode=t.appendChild(f())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=f()),t.__insert(this.endNode=f())}insertAfterPart(t){t.__insert(this.startNode=f()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;e(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=o,t.isClass?t.body(this):t(this)}const t=this.__pendingValue;t!==o&&(x(t)?t!==this.value&&this.__commitText(t):t instanceof w?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):_(t)?this.__commitIterable(t):t===r?(this.value=r,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,i="string"==typeof(t=null==t?"":t)?t:String(t);if(e===this.endNode.previousSibling&&3===e.nodeType)e.data=i;else{const t=b.cloneNode();t.textContent=i,this.__commitNode(t)}this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof g&&this.value.template===e)this.value.update(t.values);else{const i=new g(e,t.processor,this.options),s=i._clone();i.update(t.values),this.__commitNode(s),this.value=i}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let i,s=0;for(const n of t)i=e[s],void 0===i&&(i=new M(this.options),e.push(i),0===s?i.appendIntoPart(this):i.insertAfterPart(e[s-1])),i.setValue(n),i.commit(),s++;s<e.length&&(e.length=s,this.clear(i&&i.endNode))}clear(t=this.startNode){n(this.startNode.parentNode,t.nextSibling,this.endNode)}}class P{constructor(t,e,i){if(this.value=void 0,this.__pendingValue=void 0,2!==i.length||""!==i[0]||""!==i[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=i}setValue(t){this.__pendingValue=t}commit(){for(;e(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=o,t.isClass?t.body(this):t(this)}if(this.__pendingValue===o)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=o}}class N extends D{constructor(t,e,i){super(t,e,i),this.single=2===i.length&&""===i[0]&&""===i[1]}_createPart(){return new O(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class O extends S{}let L=!1;(()=>{try{const t={get capture(){return L=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class C{constructor(t,e,i){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=i,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;e(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=o,t.isClass?t.body(this):t(this)}if(this.__pendingValue===o)return;const t=this.__pendingValue,i=this.value,s=null==t||null!=i&&(t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive),n=null!=t&&(null==i||s);s&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=I(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=o}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const I=t=>t&&(L?{capture:t.capture,passive:t.passive,once:t.once}:t.capture
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */);class V{handleAttributeExpressions(t,e,i,s){const n=e[0];return"."===n?new N(t,e.slice(1),i).parts:"@"===n?[new C(t,e.slice(1),s.eventContext)]:"?"===n?[new P(t,e.slice(1),i)]:new D(t,e,i).parts}handleTextExpression(t){return new M(t)}}const A=new V;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function H(t){let e=E.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},E.set(t.type,e));let i=e.stringsArray.get(t.strings);if(void 0!==i)return i;const s=t.strings.join(a);return i=e.keyString.get(s),void 0===i&&(i=new p(t,t.getTemplateElement()),e.keyString.set(s,i)),e.stringsArray.set(t.strings,i),i}const E=new Map,Y=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");Object.freeze({__proto__:null,html:(t,...e)=>new w(t,e,"html",A),svg:(t,...e)=>new T(t,e,"svg",A),DefaultTemplateProcessor:V,defaultTemplateProcessor:A,directive:t=>(...e)=>{const i=t(...e);return i.isDirective=!0,i},Directive:class{constructor(){this.isDirective=!0,this.isClass=!0}body(t){}},isDirective:e,removeNodes:n,reparentNodes:s,noChange:o,nothing:r,AttributeCommitter:D,AttributePart:S,BooleanAttributePart:P,EventPart:C,isIterable:_,isPrimitive:x,NodePart:M,PropertyCommitter:N,PropertyPart:O,parts:Y,render:(t,e,i)=>{let s=Y.get(e);void 0===s&&(n(e,e.firstChild),Y.set(e,s=new M(Object.assign({templateFactory:H},i))),s.appendInto(e)),s.setValue(t),s.commit()},templateCaches:E,templateFactory:H,TemplateInstance:g,SVGTemplateResult:T,TemplateResult:w,createMarker:f,isTemplatePartActive:c,Template:p}),document.createElement("template");document.createTextNode("");function j(t,e=""){let i=`gstc__${t}`;return"gstc"===t&&(i="gstc"),e?`${i} ${i}--${e.replace(":","-")}`:i}const k="config.plugin.DependencyLines",G="config.slots.chart-timeline-items.outer",R=j("chart-timeline-dependency-lines-lines"),W=j("chart-timeline-dependency-lines-lines-line"),U=j("chart-timeline-dependency-lines-points"),F=j("chart-timeline-dependency-lines-points-point");class q{constructor(t,e){this.onDestroy=[],this.vido=t,this.api=this.vido.api,this.state=this.vido.state;const i=this.vido.html`<div class=${F+"--left"}></div>`,s=this.vido.html`<div class=${F+"--right"}></div>`;this.data=function(t){return Object.assign(Object.assign({},t),{lines:[]})}(function(t,e,i){const s=Object.assign(Object.assign({},function(t,e){return{type:"smooth",onLines:[],onLine:[],leftPoint:{content:t,width:10,height:10},rightPoint:{content:e,width:10,height:10}}}(e,i)),t);return t.leftPoint&&(s.leftPoint=Object.assign(Object.assign({},s.leftPoint),t.leftPoint)),t.rightPoint&&(s.rightPoint=Object.assign(Object.assign({},s.rightPoint),t.rightPoint)),s}(e,i,s)),this.slot=this.slot.bind(this),this.generateLines=this.generateLines.bind(this),this.destroy=this.destroy.bind(this),this.updateData(),this.onDestroy.push(this.state.subscribe(k,(t=>{this.data=t}))),this.state.update(G,(t=>(t.includes(this.slot)||t.push(this.slot),t))),this.onDestroy.push(this.state.subscribeAll(["$data.chart.items","$data.list.rowsHeight"],this.generateLines))}destroy(){this.state.update(G,(t=>t.filter((t=>t!==this.slot)))),this.onDestroy.forEach((t=>t())),this.api.pluginDestroyed("DependencyLines")}updateData(){this.state.update(k,Object.assign({},this.data)),this.vido.update()}setStraightPoints(t){const{topOffset:e,leftOffset:i,fromItemData:s,toItemData:n,fromRowData:o,toRowData:r}=t;o.visible&&r.visible&&(t.points.push({x:s.position.right+i,y:o.visible?s.position.viewTop+e:o.position.viewTop,type:"M",content:this.data.leftPoint.content}),t.points.push({x:n.position.left-i,y:r.visible?n.position.viewTop+e:r.position.viewTop,type:"L",content:this.data.rightPoint.content}))}setSquareAltPoints(t){const{topOffset:e,leftOffset:i,fromItemData:s,toItemData:n,fromRowData:o,toRowData:r}=t;if(!o.visible&&!r.visible)return;const a=(n.position.left-s.position.right)/2,l=s.position.right+a,h=(n.position.viewTop-s.position.viewTop)/2,p=s.position.viewTop+h;t.points.push({x:s.position.right+i,y:o.visible?s.position.viewTop+e:o.position.viewTop,type:"M",content:this.data.leftPoint.content}),n.position.left<s.position.right?(t.points.push({x:s.position.right+i+10,y:o.visible?s.position.viewTop+e:o.position.viewTop,type:"L",content:null}),t.points.push({x:s.position.right+i+10,y:o.visible?p+e:o.position.viewTop,type:"L",content:null})):t.points.push({x:l,y:o.visible?s.position.viewTop+e:o.position.viewTop,type:"L",content:null}),t.points.push({x:l,y:o.visible?p+e:o.position.viewTop,type:"L",content:null}),r.visible?(n.position.left<s.position.right?(t.points.push({x:n.position.left-i-10,y:o.visible?p+e:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left-i-10,y:r.visible?n.position.viewTop+e:o.position.viewTop,type:"L",content:null})):t.points.push({x:l,y:r.visible?n.position.viewTop+e:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left-i,y:r.visible?n.position.viewTop+e:r.position.viewTop,type:"L",content:this.data.rightPoint.content})):t.points.push({x:l,y:r.position.viewTop,type:"L",content:this.data.rightPoint.content})}setSquarePoints(t){const{topOffset:e,leftOffset:i,fromItemData:s,toItemData:n,fromRowData:o,toRowData:r}=t;(o.visible||r.visible)&&(t.points.push({x:s.position.right+i,y:o.visible?s.position.viewTop+e:o.position.viewTop,type:"M",content:this.data.leftPoint.content}),s.position.viewTop!==n.position.viewTop?n.position.left<s.position.right?(t.points.push({x:s.position.right+i+10,y:o.visible?s.position.viewTop+e:o.position.viewTop,type:"L",content:null}),n.position.viewTop>s.position.viewTop?(t.points.push({x:s.position.right+i+10,y:o.visible?o.position.viewTop+o.outerHeight:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left+i+10,y:o.visible?o.position.viewTop+o.outerHeight:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left+i+10,y:r.visible?n.position.viewTop:r.position.viewTop,type:"L",content:this.data.rightPoint.content})):(t.points.push({x:s.position.right+i+10,y:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left+i+10,y:o.position.viewTop,type:"L",content:null}),t.points.push({x:n.position.left+i+10,y:r.visible?n.position.viewTop+n.actualHeight:r.position.viewTop,type:"L",content:this.data.rightPoint.content}))):(t.points.push({x:n.position.left+10,y:o.visible?s.position.viewTop+e:o.position.viewTop,type:"L",content:null}),n.position.viewTop>s.position.viewTop?t.points.push({x:n.position.left+10,y:r.visible?n.position.viewTop:r.position.viewTop,type:"L",content:this.data.rightPoint.content}):t.points.push({x:n.position.left+10,y:r.visible?n.position.viewTop+n.actualHeight:r.position.viewTop,type:"L",content:this.data.rightPoint.content})):t.points.push({x:n.position.left-i,y:r.visible?n.position.viewTop+e:r.position.viewTop,type:"L",content:this.data.rightPoint.content}))}setSmoothPoints(t){const{topOffset:e,leftOffset:i,fromItemData:s,toItemData:n,fromRowData:o,toRowData:r}=t;if(!o.visible&&!r.visible)return;if(t.points.push({x:s.position.right+i,y:o.visible?s.position.viewTop+e:o.position.viewTop,type:"M",content:this.data.leftPoint.content}),s.position.viewTop===n.position.viewTop)return void t.points.push({x:n.position.left-i,y:r.visible?n.position.viewTop+e:r.position.viewTop,type:"L",content:this.data.rightPoint.content});const a=(n.position.left-s.position.right)/2,l=s.position.right+a;if(s.position.right<=n.position.left)t.points.push({x:l,y:o.visible?s.position.viewTop+e:o.position.viewTop,type:"C",content:null}),t.points.push({x:l,y:r.visible?n.position.viewTop+e:r.position.viewTop,type:"",content:null}),t.points.push({x:n.position.left-i,y:r.visible?n.position.viewTop+e:r.position.viewTop,type:"",content:this.data.rightPoint.content});else{const a=(n.position.viewTop-s.position.viewTop)/2,h=s.position.viewTop+a+e;t.points.push({x:s.position.right+20,y:o.visible?s.position.viewTop+e:o.position.viewTop,type:"C",content:null}),t.points.push({x:s.position.right+40,y:h,type:"",content:null}),t.points.push({x:l,y:h,type:"",content:null}),t.points.push({x:n.position.left+i-20,y:r.visible?n.position.viewTop+e:r.position.viewTop,type:"S",content:null}),t.points.push({x:n.position.left+i,y:r.visible?n.position.viewTop+e:r.position.viewTop,type:"",content:this.data.rightPoint.content})}}setPoints(t){switch(t.type){case"straight":this.setStraightPoints(t);break;case"square":this.setSquarePoints(t);break;case"smooth":this.setSmoothPoints(t);break;case"square-alt":this.setSquareAltPoints(t)}}generateLines(){const t=[],e=this.api.getAllItems(),i=this.api.getRowsData(),s=this.api.getItemsData(),n=this.state.get("$data.chart.time"),o=this.state.get("config.chart.spacing"),r=this.state.get("$data.chart.dimensions"),a=this.data.type;for(const l in e){const h=e[l];if(!h.dependant)continue;if(!h.dependant.length)continue;const p=i[h.rowId],u=s[l],c=h;if(u&&p)for(const d of h.dependant){const h=e[d],f=h,v=i[h.rowId],g=s[d];if(!g||!v)continue;if(n.calculatedZoomMode){if(c.time.end<n.leftGlobal&&f.time.start>n.rightGlobal)continue;if(f.time.end<n.leftGlobal&&c.time.start>n.rightGlobal)continue;if(c.time.start>n.rightGlobal&&f.time.start>n.rightGlobal)continue;if(c.time.end<n.leftGlobal&&f.time.end<n.leftGlobal)continue}this.api.calculateItemPosition(l,u,p,n,o),this.api.calculateItemPosition(d,g,v,n,o);const m=u.actualHeight/2,y=0;let $={x:0,y:0,width:r.width,height:r.height,topOffset:m,leftOffset:y,points:[],type:a,fromItemData:u,toItemData:g,fromItem:c,toItem:f,fromRowData:p,toRowData:v,className:W};for(const t of this.data.onLine)$=t($);this.setPoints($),t.push($)}}this.data.lines=t;for(const t of this.data.onLines)this.data.lines=t(this.data.lines);this.updateData()}slot(t){const{html:e,svg:i}=t,s=t=>{if(!t.points.length)return"";const e=t.points.slice(),i=e.shift();return[`${i.type} ${i.x} ${i.y}`,[...e.map((t=>`${t.type} ${t.x} ${t.y}`))]].join(" ")},n=(t,i)=>{const s=`left:${t.x-(0===i?this.data.leftPoint.width/2:this.data.rightPoint.width/2)}px;top:${t.y-(0===i?this.data.leftPoint.height/2:this.data.rightPoint.height/2)}px;width:${0===i?this.data.leftPoint.width:this.data.rightPoint.width}px;height:${0===i?this.data.leftPoint.width:this.data.rightPoint.width}px`;return t.content?e`<div class=${F+" "+F+"--"+this.data.type} style=${s}>
            ${t.content}
          </div>`:null},o=t=>i`<svg width=${t.width} height=${t.height} xmlns="http://www.w3.org/2000/svg">
        <path d=${(t=>{switch(t.type){case"straight":return(t=>{const e=t.points;return[`${e[0].type} ${e[0].x} ${e[0].y}`,`${e[1].type} ${e[1].x} ${e[1].y}`].join(" ")})(t);case"square":case"square-alt":return s(t);case"smooth":return(t=>{if(!t.points.length)return"";const e=t.points.slice(),i=e.shift();return[`${i.type} ${i.x} ${i.y}`,[...e.map((t=>`${t.type} ${t.x} ${t.y}`))]].join(" ")})(t)}})(t)} />
      </svg>`;return t=>e`<div class="${R}">${this.data.lines.map((t=>(t=>e`<div
      class=${t.className}
      style="left: ${t.x}px; top: ${t.y}px; width: ${t.width}px; height: ${t.height}px;"
    >
      ${o(t)}
    </div>`)(t)))}</div>
        ${t}
        <div class="${U}">${this.data.lines.map((t=>(t=>t.points.map(((t,e)=>n(t,e))))(t)))}</div>`}}function B(t={}){return function(e){const i=e.api,s=e.state.get(k);s&&(t=e.api.mergeDeep({},t,s));const n=new q(e,t);return i.pluginInitialized("DependencyLines"),n.destroy}}export{B as Plugin};
